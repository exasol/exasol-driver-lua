<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1049px" preserveAspectRatio="none" style="width:856px;height:1049px;background:#FFFFFF;" version="1.1" viewBox="0 0 856 1049" width="856px" zoomAndPan="magnify"><defs/><g><rect height="30.4883" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="319" x="270.25" y="10"/><text fill="#000000" font-family="Calibri" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="305" x="277.25" y="30.5352">Executing Statements and fetching results</text><rect fill="#FFFFFF" height="924.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="64" y="108.4648"/><rect fill="#FFFFFF" height="295.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="217" y="133.7754"/><rect fill="#FFFFFF" height="251.4629" style="stroke:#181818;stroke-width:1.0;" width="10" x="342.5" y="493.2148"/><rect fill="#FFFFFF" height="204.1523" style="stroke:#181818;stroke-width:1.0;" width="10" x="342.5" y="813.2988"/><rect fill="#FFFFFF" height="201.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="542.5" y="167.0859"/><rect fill="#FFFFFF" height="61.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="542.5" y="569.7461"/><rect fill="#FFFFFF" height="61.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="542.5" y="935.1406"/><rect fill="#FFFFFF" height="924.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="724.5" y="108.4648"/><rect fill="#FFFFFF" height="60.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="729.5" y="268.0176"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="729.5" y="603.0566"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="729.5" y="968.4512"/><rect height="154.2422" style="stroke:#000000;stroke-width:1.5;fill:none;" width="423.5" x="427" y="182.0859"/><rect height="308.0391" style="stroke:#000000;stroke-width:1.5;fill:none;" width="804.5" x="10" y="444.6387"/><rect height="177.1523" style="stroke:#000000;stroke-width:1.5;fill:none;" width="513.5" x="291" y="508.2148"/><rect height="258.7734" style="stroke:#000000;stroke-width:1.5;fill:none;" width="804.5" x="10" y="766.6777"/><rect height="176.1523" style="stroke:#000000;stroke-width:1.5;fill:none;" width="513.5" x="291" y="828.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="69" x2="69" y1="98.4648" y2="1042.4512"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="221.5" x2="221.5" y1="98.4648" y2="1042.4512"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="347" x2="347" y1="410.1387" y2="1042.4512"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="547" x2="547" y1="98.4648" y2="1042.4512"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="729.5" x2="729.5" y1="98.4648" y2="1042.4512"/><rect fill="#E2E2F0" height="50.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="20" y="46.4883"/><text fill="#000000" font-family="Calibri" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="33.5" y="69.0234">«external»</text><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="80" x="29" y="85.5117">Client Code</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="159.5" y="61.4648"/><ellipse cx="177.5" cy="79.4648" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M179.9731,85.6079 Q179.3921,85.9067 178.7529,86.0562 Q178.1138,86.2056 177.4082,86.2056 Q174.9014,86.2056 173.5815,84.5537 Q172.2617,82.9019 172.2617,79.7808 Q172.2617,76.6514 173.5815,74.9995 Q174.9014,73.3477 177.4082,73.3477 Q178.1138,73.3477 178.7612,73.4971 Q179.4087,73.6465 179.9731,73.9453 L179.9731,76.668 Q179.3423,76.0869 178.7488,75.8171 Q178.1553,75.5474 177.5244,75.5474 Q176.1797,75.5474 175.4949,76.614 Q174.8101,77.6807 174.8101,79.7808 Q174.8101,81.8726 175.4949,82.9392 Q176.1797,84.0059 177.5244,84.0059 Q178.1553,84.0059 178.7488,83.7361 Q179.3423,83.4663 179.9731,82.8853 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="79" x="196.5" y="84">Connection</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="488" y="61.4648"/><ellipse cx="506" cy="79.4648" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M508.4731,85.6079 Q507.8921,85.9067 507.2529,86.0562 Q506.6138,86.2056 505.9082,86.2056 Q503.4014,86.2056 502.0815,84.5537 Q500.7617,82.9019 500.7617,79.7808 Q500.7617,76.6514 502.0815,74.9995 Q503.4014,73.3477 505.9082,73.3477 Q506.6138,73.3477 507.2612,73.4971 Q507.9087,73.6465 508.4731,73.9453 L508.4731,76.668 Q507.8423,76.0869 507.2488,75.8171 Q506.6553,75.5474 506.0244,75.5474 Q504.6797,75.5474 503.9949,76.614 Q503.3101,77.6807 503.3101,79.7808 Q503.3101,81.8726 503.9949,82.9392 Q504.6797,84.0059 506.0244,84.0059 Q506.6553,84.0059 507.2488,83.7361 Q507.8423,83.4663 508.4731,82.8853 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="73" x="525" y="84">Websocket</text><rect fill="#E2E2F0" height="34.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="664.5" y="62.9766"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="112" x="673.5" y="85.5117">Exasol Database</text><rect fill="#FFFFFF" height="924.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="64" y="108.4648"/><rect fill="#FFFFFF" height="295.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="217" y="133.7754"/><rect fill="#FFFFFF" height="251.4629" style="stroke:#181818;stroke-width:1.0;" width="10" x="342.5" y="493.2148"/><rect fill="#FFFFFF" height="204.1523" style="stroke:#181818;stroke-width:1.0;" width="10" x="342.5" y="813.2988"/><rect fill="#FFFFFF" height="201.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="542.5" y="167.0859"/><rect fill="#FFFFFF" height="61.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="542.5" y="569.7461"/><rect fill="#FFFFFF" height="61.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="542.5" y="935.1406"/><rect fill="#FFFFFF" height="924.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="724.5" y="108.4648"/><rect fill="#FFFFFF" height="60.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="729.5" y="268.0176"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="729.5" y="603.0566"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="729.5" y="968.4512"/><polygon fill="#181818" points="205,129.7754,215,133.7754,205,137.7754" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="74" x2="211" y1="133.7754" y2="133.7754"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="120" x="83" y="127.0332">execute(statement)</text><polygon fill="#181818" points="530.5,163.0859,540.5,167.0859,530.5,171.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="227" x2="536.5" y1="167.0859" y2="167.0859"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="49" x="236" y="160.3438">execute</text><path d="M427,182.0859 L679,182.0859 L679,193.3965 L669,203.3965 L427,203.3965 L427,182.0859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="154.2422" style="stroke:#000000;stroke-width:1.5;" width="423.5" x="427" y="182.0859"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="203" x="444" y="197.6543">Websocket Request/Response</text><path d="M437,208.3965 L437,237.3965 L657,237.3965 L657,218.3965 L647,208.3965 L437,208.3965 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M647,208.3965 L647,218.3965 L657,218.3965 L647,208.3965 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="195" x="445" y="227.9648">See details in separate diagram</text><polygon fill="#181818" points="717.5,264.0176,727.5,268.0176,717.5,272.0176" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="552.5" x2="723.5" y1="268.0176" y2="268.0176"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="49" x="561.5" y="261.2754">execute</text><line style="stroke:#181818;stroke-width:1.0;" x1="739.5" x2="781.5" y1="301.3281" y2="301.3281"/><line style="stroke:#181818;stroke-width:1.0;" x1="781.5" x2="781.5" y1="301.3281" y2="314.3281"/><line style="stroke:#181818;stroke-width:1.0;" x1="740.5" x2="781.5" y1="314.3281" y2="314.3281"/><polygon fill="#181818" points="750.5,310.3281,740.5,314.3281,750.5,318.3281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="88" x="748.5" y="294.5859">Execute query</text><polygon fill="#181818" points="563.5,324.3281,553.5,328.3281,563.5,332.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="557.5" x2="723.5" y1="328.3281" y2="328.3281"/><polygon fill="#181818" points="238,364.6387,228,368.6387,238,372.6387" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="232" x2="546.5" y1="368.6387" y2="368.6387"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="180" x="246" y="361.8965">Resultset or resultset handle</text><polygon fill="#181818" points="289,397.9492,299,401.9492,289,405.9492" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="227" x2="295" y1="401.9492" y2="401.9492"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="46" x="236" y="395.207">create()</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="301" y="376.6387"/><ellipse cx="319" cy="394.6387" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M321.4731,400.7817 Q320.8921,401.0806 320.2529,401.23 Q319.6138,401.3794 318.9082,401.3794 Q316.4014,401.3794 315.0815,399.7275 Q313.7617,398.0757 313.7617,394.9546 Q313.7617,391.8252 315.0815,390.1733 Q316.4014,388.5215 318.9082,388.5215 Q319.6138,388.5215 320.2612,388.6709 Q320.9087,388.8203 321.4731,389.1191 L321.4731,391.8418 Q320.8423,391.2607 320.2488,390.991 Q319.6553,390.7212 319.0244,390.7212 Q317.6797,390.7212 316.9949,391.7878 Q316.3101,392.8545 316.3101,394.9546 Q316.3101,397.0464 316.9949,398.113 Q317.6797,399.1797 319.0244,399.1797 Q319.6553,399.1797 320.2488,398.9099 Q320.8423,398.6401 321.4731,398.0591 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="47" x="338" y="399.1738">Cursor</text><polygon fill="#181818" points="85,425.6387,75,429.6387,85,433.6387" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="79" x2="221" y1="429.6387" y2="429.6387"/><path d="M10,444.6387 L88,444.6387 L88,455.9492 L78,465.9492 L10,465.9492 L10,444.6387 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="308.0391" style="stroke:#000000;stroke-width:1.5;" width="804.5" x="10" y="444.6387"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="27" y="460.207">loop</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="203" x="105" y="459.2734">[Fetch results until all rows fetched]</text><polygon fill="#181818" points="330.5,489.2148,340.5,493.2148,330.5,497.2148" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="74" x2="336.5" y1="493.2148" y2="493.2148"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="40" x="83" y="486.4727">fetch()</text><path d="M291,508.2148 L357,508.2148 L357,519.5254 L347,529.5254 L291,529.5254 L291,508.2148 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="177.1523" style="stroke:#000000;stroke-width:1.5;" width="513.5" x="291" y="508.2148"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="308" y="523.7832">alt</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="210" x="374" y="522.8496">[If DB has returned a resultset handle</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="228" x="374" y="535.8047">and no more rows available in local list]</text><polygon fill="#181818" points="530.5,565.7461,540.5,569.7461,530.5,573.7461" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352.5" x2="536.5" y1="569.7461" y2="569.7461"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="144" x="361.5" y="563.0039">fetch(resultset_handle)</text><polygon fill="#181818" points="717.5,599.0566,727.5,603.0566,717.5,607.0566" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="552.5" x2="723.5" y1="603.0566" y2="603.0566"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="144" x="561.5" y="596.3145">fetch(resultset_handle)</text><polygon fill="#181818" points="563.5,613.0566,553.5,617.0566,563.5,621.0566" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="557.5" x2="723.5" y1="617.0566" y2="617.0566"/><polygon fill="#181818" points="363.5,627.0566,353.5,631.0566,363.5,635.0566" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357.5" x2="546.5" y1="631.0566" y2="631.0566"/><line style="stroke:#181818;stroke-width:1.0;" x1="352.5" x2="394.5" y1="664.3672" y2="664.3672"/><line style="stroke:#181818;stroke-width:1.0;" x1="394.5" x2="394.5" y1="664.3672" y2="677.3672"/><line style="stroke:#181818;stroke-width:1.0;" x1="353.5" x2="394.5" y1="677.3672" y2="677.3672"/><polygon fill="#181818" points="363.5,673.3672,353.5,677.3672,363.5,681.3672" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="137" x="361.5" y="657.625">Store data in local list</text><line style="stroke:#181818;stroke-width:1.0;" x1="352.5" x2="394.5" y1="717.6777" y2="717.6777"/><line style="stroke:#181818;stroke-width:1.0;" x1="394.5" x2="394.5" y1="717.6777" y2="730.6777"/><line style="stroke:#181818;stroke-width:1.0;" x1="353.5" x2="394.5" y1="730.6777" y2="730.6777"/><polygon fill="#181818" points="363.5,726.6777,353.5,730.6777,363.5,734.6777" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="172" x="361.5" y="710.9355">Get next row from local list</text><polygon fill="#181818" points="85,740.6777,75,744.6777,85,748.6777" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="79" x2="346.5" y1="744.6777" y2="744.6777"/><path d="M10,766.6777 L142,766.6777 L142,777.9883 L132,787.9883 L10,787.9883 L10,766.6777 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="258.7734" style="stroke:#000000;stroke-width:1.5;" width="804.5" x="10" y="766.6777"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83" x="27" y="782.2461">Close cursor</text><polygon fill="#181818" points="330.5,809.2988,340.5,813.2988,330.5,817.2988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="74" x2="336.5" y1="813.2988" y2="813.2988"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="41" x="83" y="806.5566">close()</text><path d="M291,828.2988 L357,828.2988 L357,839.6094 L347,849.6094 L291,849.6094 L291,828.2988 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="176.1523" style="stroke:#000000;stroke-width:1.5;" width="513.5" x="291" y="828.2988"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="308" y="843.8672">alt</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116" x="374" y="842.9336">[No resultset handle]</text><path d="M357,856.5645 L357,885.5645 L635,885.5645 L635,866.5645 L625,856.5645 L357,856.5645 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M625,856.5645 L625,866.5645 L635,866.5645 L625,856.5645 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="253" x="365" y="876.1328">Nothing to do when no resultset is used</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="291" x2="804.5" y1="891.875" y2="891.875"/><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="231" x="298" y="904.5098">[Result set handle, more than 1000 rows]</text><polygon fill="#181818" points="530.5,931.1406,540.5,935.1406,530.5,939.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352.5" x2="536.5" y1="935.1406" y2="935.1406"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="92" x="361.5" y="928.3984">close resultset</text><polygon fill="#181818" points="717.5,964.4512,727.5,968.4512,717.5,972.4512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="552.5" x2="723.5" y1="968.4512" y2="968.4512"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="92" x="561.5" y="961.709">close resultset</text><polygon fill="#181818" points="563.5,978.4512,553.5,982.4512,563.5,986.4512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="557.5" x2="723.5" y1="982.4512" y2="982.4512"/><polygon fill="#181818" points="363.5,992.4512,353.5,996.4512,363.5,1000.4512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357.5" x2="546.5" y1="996.4512" y2="996.4512"/><polygon fill="#181818" points="85,1013.4512,75,1017.4512,85,1021.4512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="79" x2="346.5" y1="1017.4512" y2="1017.4512"/><line style="stroke:#A80036;stroke-width:2.0;" x1="338.5" x2="356.5" y1="1008.4512" y2="1026.4512"/><line style="stroke:#A80036;stroke-width:2.0;" x1="338.5" x2="356.5" y1="1026.4512" y2="1008.4512"/><!--MD5=[9830c481d69370a067c1ef19ac36b6f9]
@startuml seq_execute_statement
!include ../clean.skin

title: Executing Statements and fetching results

participant "Client Code" as client <<external>>
participant Connection as conn << (C,#ADD1B2) >>
participant Cursor as cur << (C,#ADD1B2) >>
participant Websocket as ws << (C,#ADD1B2) >>
participant "Exasol Database" as db

activate client
activate db
client -> conn: execute(statement)
activate conn
conn -> ws: execute
activate ws
group Websocket Request/Response
    note over ws: See details in separate diagram
    ws -> db: execute
    activate db
    db -> db: Execute query
    db - -> ws
    deactivate db
end
ws - -> conn: Resultset or resultset handle
deactivate ws
create cur
conn -> cur: create()
conn - -> client
deactivate conn
loop Fetch results until all rows fetched
    client -> cur: fetch()
    activate cur
    alt If DB has returned a resultset handle\nand no more rows available in local list
        cur -> ws : fetch(resultset_handle)
        activate ws
        ws -> db : fetch(resultset_handle)
        activate db
        db - -> ws
        deactivate db
        ws - -> cur
        deactivate ws
        cur -> cur : Store data in local list
    end
    cur -> cur : Get next row from local list
    cur - -> client
    deactivate cur
end
group Close cursor
    client -> cur : close()
    activate cur
    alt No resultset handle
        note right of cur: Nothing to do when no resultset is used
    else Result set handle, more than 1000 rows
        cur -> ws : close resultset
        activate ws
        ws -> db : close resultset
        activate db
        db - -> ws
        deactivate db
        ws - -> cur
        deactivate ws
    end
    cur - -> client
    deactivate cur
    destroy cur
    deactivate cur
end

@enduml

@startuml seq_execute_statement
hide empty methods
hide empty attributes
skinparam style strictuml
skinparam classAttributeIconSize 0
!pragma horizontalLineBetweenDifferentPackageAllowed

skinparam defaultFontName Calibri

skinparam padding 2

title: Executing Statements and fetching results

participant "Client Code" as client <<external>>
participant Connection as conn << (C,#ADD1B2) >>
participant Cursor as cur << (C,#ADD1B2) >>
participant Websocket as ws << (C,#ADD1B2) >>
participant "Exasol Database" as db

activate client
activate db
client -> conn: execute(statement)
activate conn
conn -> ws: execute
activate ws
group Websocket Request/Response
    note over ws: See details in separate diagram
    ws -> db: execute
    activate db
    db -> db: Execute query
    db - -> ws
    deactivate db
end
ws - -> conn: Resultset or resultset handle
deactivate ws
create cur
conn -> cur: create()
conn - -> client
deactivate conn
loop Fetch results until all rows fetched
    client -> cur: fetch()
    activate cur
    alt If DB has returned a resultset handle\nand no more rows available in local list
        cur -> ws : fetch(resultset_handle)
        activate ws
        ws -> db : fetch(resultset_handle)
        activate db
        db - -> ws
        deactivate db
        ws - -> cur
        deactivate ws
        cur -> cur : Store data in local list
    end
    cur -> cur : Get next row from local list
    cur - -> client
    deactivate cur
end
group Close cursor
    client -> cur : close()
    activate cur
    alt No resultset handle
        note right of cur: Nothing to do when no resultset is used
    else Result set handle, more than 1000 rows
        cur -> ws : close resultset
        activate ws
        ws -> db : close resultset
        activate db
        db - -> ws
        deactivate db
        ws - -> cur
        deactivate ws
    end
    cur - -> client
    deactivate cur
    destroy cur
    deactivate cur
end

@enduml

PlantUML version 1.2022.2(Sat Mar 05 17:30:19 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>