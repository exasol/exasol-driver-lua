<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1049px" preserveAspectRatio="none" style="width:850px;height:1049px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 1049" width="850px" zoomAndPan="magnify"><defs/><g><rect height="30.4883" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="296" x="278.5" y="10"/><text fill="#000000" font-family="Calibri" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="282" x="285.5" y="30.5352">Executing Statements and fetch results</text><rect fill="#FFFFFF" height="924.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="64" y="108.4648"/><rect fill="#FFFFFF" height="924.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="222" y="108.4648"/><rect fill="#FFFFFF" height="605.502" style="stroke:#181818;stroke-width:1.0;" width="10" x="341" y="411.9492"/><rect fill="#FFFFFF" height="924.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="541" y="108.4648"/><rect fill="#FFFFFF" height="924.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="723" y="108.4648"/><rect height="154.2422" style="stroke:#000000;stroke-width:1.5;fill:none;" width="418" x="426" y="182.0859"/><rect height="308.0391" style="stroke:#000000;stroke-width:1.5;fill:none;" width="803" x="10" y="444.6387"/><rect height="177.1523" style="stroke:#000000;stroke-width:1.5;fill:none;" width="513.5" x="289.5" y="508.2148"/><rect height="258.7734" style="stroke:#000000;stroke-width:1.5;fill:none;" width="803" x="10" y="766.6777"/><rect height="176.1523" style="stroke:#000000;stroke-width:1.5;fill:none;" width="513.5" x="289.5" y="828.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="69" x2="69" y1="98.4648" y2="1042.4512"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="226.5" x2="226.5" y1="98.4648" y2="1042.4512"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="345.5" x2="345.5" y1="410.1387" y2="1042.4512"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="545.5" x2="545.5" y1="98.4648" y2="1042.4512"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="728" x2="728" y1="98.4648" y2="1042.4512"/><rect fill="#E2E2F0" height="50.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="20" y="46.4883"/><text fill="#000000" font-family="Calibri" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="33.5" y="69.0234">«external»</text><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="80" x="29" y="85.5117">Client Code</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="164.5" y="61.4648"/><ellipse cx="182.5" cy="79.4648" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M184.9731,85.6079 Q184.3921,85.9067 183.7529,86.0562 Q183.1138,86.2056 182.4082,86.2056 Q179.9014,86.2056 178.5815,84.5537 Q177.2617,82.9019 177.2617,79.7808 Q177.2617,76.6514 178.5815,74.9995 Q179.9014,73.3477 182.4082,73.3477 Q183.1138,73.3477 183.7612,73.4971 Q184.4087,73.6465 184.9731,73.9453 L184.9731,76.668 Q184.3423,76.0869 183.7488,75.8171 Q183.1553,75.5474 182.5244,75.5474 Q181.1797,75.5474 180.4949,76.614 Q179.8101,77.6807 179.8101,79.7808 Q179.8101,81.8726 180.4949,82.9392 Q181.1797,84.0059 182.5244,84.0059 Q183.1553,84.0059 183.7488,83.7361 Q184.3423,83.4663 184.9731,82.8853 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="79" x="201.5" y="84">Connection</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="486.5" y="61.4648"/><ellipse cx="504.5" cy="79.4648" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M506.9731,85.6079 Q506.3921,85.9067 505.7529,86.0562 Q505.1138,86.2056 504.4082,86.2056 Q501.9014,86.2056 500.5815,84.5537 Q499.2617,82.9019 499.2617,79.7808 Q499.2617,76.6514 500.5815,74.9995 Q501.9014,73.3477 504.4082,73.3477 Q505.1138,73.3477 505.7612,73.4971 Q506.4087,73.6465 506.9731,73.9453 L506.9731,76.668 Q506.3423,76.0869 505.7488,75.8171 Q505.1553,75.5474 504.5244,75.5474 Q503.1797,75.5474 502.4949,76.614 Q501.8101,77.6807 501.8101,79.7808 Q501.8101,81.8726 502.4949,82.9392 Q503.1797,84.0059 504.5244,84.0059 Q505.1553,84.0059 505.7488,83.7361 Q506.3423,83.4663 506.9731,82.8853 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="73" x="523.5" y="84">Websocket</text><rect fill="#E2E2F0" height="34.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="663" y="62.9766"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="112" x="672" y="85.5117">Exasol Database</text><rect fill="#FFFFFF" height="924.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="64" y="108.4648"/><rect fill="#FFFFFF" height="924.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="222" y="108.4648"/><rect fill="#FFFFFF" height="605.502" style="stroke:#181818;stroke-width:1.0;" width="10" x="341" y="411.9492"/><rect fill="#FFFFFF" height="924.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="541" y="108.4648"/><rect fill="#FFFFFF" height="924.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="723" y="108.4648"/><polygon fill="#181818" points="210,129.7754,220,133.7754,210,137.7754" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="74" x2="216" y1="133.7754" y2="133.7754"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="120" x="83" y="127.0332">execute(statement)</text><polygon fill="#181818" points="529,163.0859,539,167.0859,529,171.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="232" x2="535" y1="167.0859" y2="167.0859"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="49" x="241" y="160.3438">execute</text><path d="M426,182.0859 L678,182.0859 L678,193.3965 L668,203.3965 L426,203.3965 L426,182.0859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="154.2422" style="stroke:#000000;stroke-width:1.5;" width="418" x="426" y="182.0859"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="203" x="443" y="197.6543">Websocket Request/Response</text><path d="M436,208.3965 L436,237.3965 L656,237.3965 L656,218.3965 L646,208.3965 L436,208.3965 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M646,208.3965 L646,218.3965 L656,218.3965 L646,208.3965 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="195" x="444" y="227.9648">See details in separate diagram</text><polygon fill="#181818" points="711,264.0176,721,268.0176,711,272.0176" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="551" x2="717" y1="268.0176" y2="268.0176"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="49" x="560" y="261.2754">execute</text><line style="stroke:#181818;stroke-width:1.0;" x1="733" x2="775" y1="301.3281" y2="301.3281"/><line style="stroke:#181818;stroke-width:1.0;" x1="775" x2="775" y1="301.3281" y2="314.3281"/><line style="stroke:#181818;stroke-width:1.0;" x1="734" x2="775" y1="314.3281" y2="314.3281"/><polygon fill="#181818" points="744,310.3281,734,314.3281,744,318.3281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="88" x="742" y="294.5859">Execute query</text><polygon fill="#181818" points="562,324.3281,552,328.3281,562,332.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="556" x2="722" y1="328.3281" y2="328.3281"/><polygon fill="#181818" points="243,364.6387,233,368.6387,243,372.6387" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="237" x2="540" y1="368.6387" y2="368.6387"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="180" x="251" y="361.8965">Resultset or resultset handle</text><polygon fill="#181818" points="287.5,397.9492,297.5,401.9492,287.5,405.9492" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="232" x2="293.5" y1="401.9492" y2="401.9492"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="38" x="241" y="395.207">create</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="299.5" y="376.6387"/><ellipse cx="317.5" cy="394.6387" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M319.9731,400.7817 Q319.3921,401.0806 318.7529,401.23 Q318.1138,401.3794 317.4082,401.3794 Q314.9014,401.3794 313.5815,399.7275 Q312.2617,398.0757 312.2617,394.9546 Q312.2617,391.8252 313.5815,390.1733 Q314.9014,388.5215 317.4082,388.5215 Q318.1138,388.5215 318.7612,388.6709 Q319.4087,388.8203 319.9731,389.1191 L319.9731,391.8418 Q319.3423,391.2607 318.7488,390.991 Q318.1553,390.7212 317.5244,390.7212 Q316.1797,390.7212 315.4949,391.7878 Q314.8101,392.8545 314.8101,394.9546 Q314.8101,397.0464 315.4949,398.113 Q316.1797,399.1797 317.5244,399.1797 Q318.1553,399.1797 318.7488,398.9099 Q319.3423,398.6401 319.9731,398.0591 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="47" x="336.5" y="399.1738">Cursor</text><polygon fill="#181818" points="85,425.6387,75,429.6387,85,433.6387" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="79" x2="221" y1="429.6387" y2="429.6387"/><path d="M10,444.6387 L88,444.6387 L88,455.9492 L78,465.9492 L10,465.9492 L10,444.6387 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="308.0391" style="stroke:#000000;stroke-width:1.5;" width="803" x="10" y="444.6387"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="27" y="460.207">loop</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="203" x="105" y="459.2734">[Fetch results until all rows fetched]</text><polygon fill="#181818" points="329,489.2148,339,493.2148,329,497.2148" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="74" x2="335" y1="493.2148" y2="493.2148"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="40" x="83" y="486.4727">fetch()</text><path d="M289.5,508.2148 L355.5,508.2148 L355.5,519.5254 L345.5,529.5254 L289.5,529.5254 L289.5,508.2148 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="177.1523" style="stroke:#000000;stroke-width:1.5;" width="513.5" x="289.5" y="508.2148"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="306.5" y="523.7832">alt</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="210" x="372.5" y="522.8496">[If DB has returned a resultset handle</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="228" x="372.5" y="535.8047">and no more rows available in local list]</text><polygon fill="#181818" points="529,565.7461,539,569.7461,529,573.7461" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="351" x2="535" y1="569.7461" y2="569.7461"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="144" x="360" y="563.0039">fetch(resultset_handle)</text><polygon fill="#181818" points="711,599.0566,721,603.0566,711,607.0566" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="551" x2="717" y1="603.0566" y2="603.0566"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="144" x="560" y="596.3145">fetch(resultset_handle)</text><polygon fill="#181818" points="562,613.0566,552,617.0566,562,621.0566" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="556" x2="722" y1="617.0566" y2="617.0566"/><polygon fill="#181818" points="362,627.0566,352,631.0566,362,635.0566" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="356" x2="540" y1="631.0566" y2="631.0566"/><line style="stroke:#181818;stroke-width:1.0;" x1="351" x2="393" y1="664.3672" y2="664.3672"/><line style="stroke:#181818;stroke-width:1.0;" x1="393" x2="393" y1="664.3672" y2="677.3672"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="393" y1="677.3672" y2="677.3672"/><polygon fill="#181818" points="362,673.3672,352,677.3672,362,681.3672" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="137" x="360" y="657.625">Store data in local list</text><line style="stroke:#181818;stroke-width:1.0;" x1="351" x2="393" y1="717.6777" y2="717.6777"/><line style="stroke:#181818;stroke-width:1.0;" x1="393" x2="393" y1="717.6777" y2="730.6777"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="393" y1="730.6777" y2="730.6777"/><polygon fill="#181818" points="362,726.6777,352,730.6777,362,734.6777" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="172" x="360" y="710.9355">Get next row from local list</text><polygon fill="#181818" points="85,740.6777,75,744.6777,85,748.6777" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="79" x2="340" y1="744.6777" y2="744.6777"/><path d="M10,766.6777 L142,766.6777 L142,777.9883 L132,787.9883 L10,787.9883 L10,766.6777 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="258.7734" style="stroke:#000000;stroke-width:1.5;" width="803" x="10" y="766.6777"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83" x="27" y="782.2461">Close cursor</text><polygon fill="#181818" points="329,809.2988,339,813.2988,329,817.2988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="74" x2="335" y1="813.2988" y2="813.2988"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="41" x="83" y="806.5566">close()</text><path d="M289.5,828.2988 L355.5,828.2988 L355.5,839.6094 L345.5,849.6094 L289.5,849.6094 L289.5,828.2988 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="176.1523" style="stroke:#000000;stroke-width:1.5;" width="513.5" x="289.5" y="828.2988"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="306.5" y="843.8672">alt</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116" x="372.5" y="842.9336">[No resultset handle]</text><path d="M356,856.5645 L356,885.5645 L634,885.5645 L634,866.5645 L624,856.5645 L356,856.5645 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M624,856.5645 L624,866.5645 L634,866.5645 L624,856.5645 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="253" x="364" y="876.1328">Nothing to do when no resultset is used</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="289.5" x2="803" y1="891.875" y2="891.875"/><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="231" x="296.5" y="904.5098">[Result set handle, more than 1000 rows]</text><polygon fill="#181818" points="529,931.1406,539,935.1406,529,939.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="351" x2="535" y1="935.1406" y2="935.1406"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="92" x="360" y="928.3984">close resultset</text><polygon fill="#181818" points="711,964.4512,721,968.4512,711,972.4512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="551" x2="717" y1="968.4512" y2="968.4512"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="92" x="560" y="961.709">close resultset</text><polygon fill="#181818" points="562,978.4512,552,982.4512,562,986.4512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="556" x2="722" y1="982.4512" y2="982.4512"/><polygon fill="#181818" points="362,992.4512,352,996.4512,362,1000.4512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="356" x2="540" y1="996.4512" y2="996.4512"/><polygon fill="#181818" points="85,1013.4512,75,1017.4512,85,1021.4512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="79" x2="345" y1="1017.4512" y2="1017.4512"/><!--MD5=[cc04a26d1a6a487c97b33d21d7047899]
@startuml seq_execute_statement
!include ../clean.skin

title: Executing Statements and fetch results

participant "Client Code" as client <<external>>
participant Connection as conn << (C,#ADD1B2) >>
participant Cursor as cur << (C,#ADD1B2) >>
participant Websocket as ws << (C,#ADD1B2) >>
participant "Exasol Database" as db

activate client
activate db
activate conn
activate ws
client -> conn: execute(statement)
conn -> ws: execute
group Websocket Request/Response
    note over ws: See details in separate diagram
    ws -> db: execute
    db -> db: Execute query
    db - -> ws
end
ws - -> conn: Resultset or resultset handle
create cur
conn -> cur: create
activate cur
conn - -> client

loop Fetch results until all rows fetched
    client -> cur: fetch()
    alt If DB has returned a resultset handle\nand no more rows available in local list
        cur -> ws : fetch(resultset_handle)
        ws -> db : fetch(resultset_handle)
        db - -> ws
        ws - -> cur
        cur -> cur : Store data in local list
    end
    cur -> cur : Get next row from local list
    cur - -> client
end
group Close cursor
    client -> cur : close()
    alt No resultset handle
        note right of cur: Nothing to do when no resultset is used
    else Result set handle, more than 1000 rows
        cur -> ws : close resultset
        ws -> db : close resultset
        db - -> ws
        ws - -> cur
    end
    cur - -> client
    deactivate cur
end

@enduml

@startuml seq_execute_statement
hide empty methods
hide empty attributes
skinparam style strictuml
skinparam classAttributeIconSize 0
!pragma horizontalLineBetweenDifferentPackageAllowed

skinparam defaultFontName Calibri

skinparam padding 2

title: Executing Statements and fetch results

participant "Client Code" as client <<external>>
participant Connection as conn << (C,#ADD1B2) >>
participant Cursor as cur << (C,#ADD1B2) >>
participant Websocket as ws << (C,#ADD1B2) >>
participant "Exasol Database" as db

activate client
activate db
activate conn
activate ws
client -> conn: execute(statement)
conn -> ws: execute
group Websocket Request/Response
    note over ws: See details in separate diagram
    ws -> db: execute
    db -> db: Execute query
    db - -> ws
end
ws - -> conn: Resultset or resultset handle
create cur
conn -> cur: create
activate cur
conn - -> client

loop Fetch results until all rows fetched
    client -> cur: fetch()
    alt If DB has returned a resultset handle\nand no more rows available in local list
        cur -> ws : fetch(resultset_handle)
        ws -> db : fetch(resultset_handle)
        db - -> ws
        ws - -> cur
        cur -> cur : Store data in local list
    end
    cur -> cur : Get next row from local list
    cur - -> client
end
group Close cursor
    client -> cur : close()
    alt No resultset handle
        note right of cur: Nothing to do when no resultset is used
    else Result set handle, more than 1000 rows
        cur -> ws : close resultset
        ws -> db : close resultset
        db - -> ws
        ws - -> cur
    end
    cur - -> client
    deactivate cur
end

@enduml

PlantUML version 1.2022.2(Sat Mar 05 17:30:19 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>