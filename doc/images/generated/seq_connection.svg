<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="945px" preserveAspectRatio="none" style="width:953px;height:945px;background:#FFFFFF;" version="1.1" viewBox="0 0 953 945" width="953px" zoomAndPan="magnify"><defs/><g><rect height="30.4883" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="214" x="371" y="10"/><text fill="#000000" font-family="Calibri" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="200" x="378" y="30.5352">Connecting to the Database</text><rect fill="#DDDDDD" height="884.7227" style="stroke:#181818;stroke-width:0.5;" width="599.5" x="121" y="47.4883"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141" x="350.25" y="62.0566">Exasol Driver for Lua</text><rect fill="#FFFFFF" height="811.4121" style="stroke:#181818;stroke-width:1.0;" width="10" x="49" y="117.7988"/><rect fill="#FFFFFF" height="80.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="166" y="143.1094"/><rect fill="#FFFFFF" height="611.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="311.5" y="256.7305"/><rect fill="#FFFFFF" height="65" style="stroke:#181818;stroke-width:1.0;" width="10" x="652" y="300.041"/><rect fill="#FFFFFF" height="155.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="652" y="426.6621"/><rect fill="#FFFFFF" height="88.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="652" y="692.1465"/><rect fill="#FFFFFF" height="811.4121" style="stroke:#181818;stroke-width:1.0;" width="10" x="791" y="117.7988"/><rect height="455.416" style="stroke:#000000;stroke-width:1.5;fill:none;" width="707" x="240" y="380.041"/><rect height="127.2422" style="stroke:#000000;stroke-width:1.5;fill:none;" width="334" x="537" y="441.6621"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="54" x2="54" y1="107.7988" y2="938.2109"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="171" x2="171" y1="107.7988" y2="938.2109"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="316" x2="316" y1="184.6094" y2="938.2109"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="524.5" x2="524.5" y1="821.957" y2="938.2109"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="656.5" x2="656.5" y1="298.2305" y2="938.2109"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="796" x2="796" y1="107.7988" y2="938.2109"/><rect fill="#E2E2F0" height="50.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="5" y="55.8223"/><text fill="#000000" font-family="Calibri" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="18.5" y="78.3574">«external»</text><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="80" x="14" y="94.8457">Client Code</text><rect fill="#E2E2F0" height="34.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="125" y="72.3105"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="74" x="134" y="94.8457">Entry Point</text><rect fill="#E2E2F0" height="34.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="731" y="72.3105"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="112" x="740" y="94.8457">Exasol Database</text><rect fill="#FFFFFF" height="811.4121" style="stroke:#181818;stroke-width:1.0;" width="10" x="49" y="117.7988"/><rect fill="#FFFFFF" height="80.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="166" y="143.1094"/><rect fill="#FFFFFF" height="611.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="311.5" y="256.7305"/><rect fill="#FFFFFF" height="65" style="stroke:#181818;stroke-width:1.0;" width="10" x="652" y="300.041"/><rect fill="#FFFFFF" height="155.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="652" y="426.6621"/><rect fill="#FFFFFF" height="88.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="652" y="692.1465"/><rect fill="#FFFFFF" height="811.4121" style="stroke:#181818;stroke-width:1.0;" width="10" x="791" y="117.7988"/><polygon fill="#181818" points="154,139.1094,164,143.1094,154,147.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="59" x2="160" y1="143.1094" y2="143.1094"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="49" x="68" y="136.3672">exasol()</text><polygon fill="#181818" points="238,172.4199,248,176.4199,238,180.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="176" x2="244" y1="176.4199" y2="176.4199"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="46" x="185" y="169.6777">create()</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="250" y="151.1094"/><ellipse cx="268" cy="169.1094" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M270.4731,175.2524 Q269.8921,175.5513 269.2529,175.7007 Q268.6138,175.8501 267.9082,175.8501 Q265.4014,175.8501 264.0815,174.1982 Q262.7617,172.5464 262.7617,169.4253 Q262.7617,166.2959 264.0815,164.644 Q265.4014,162.9922 267.9082,162.9922 Q268.6138,162.9922 269.2612,163.1416 Q269.9087,163.291 270.4731,163.5898 L270.4731,166.3125 Q269.8423,165.7314 269.2488,165.4617 Q268.6553,165.1919 268.0244,165.1919 Q266.6797,165.1919 265.9949,166.2585 Q265.3101,167.3252 265.3101,169.4253 Q265.3101,171.5171 265.9949,172.5837 Q266.6797,173.6504 268.0244,173.6504 Q268.6553,173.6504 269.2488,173.3806 Q269.8423,173.1108 270.4731,172.5298 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="87" x="287" y="173.6445">Environment</text><polygon fill="#181818" points="70,219.4199,60,223.4199,70,227.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="170" y1="223.4199" y2="223.4199"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="79" x="78" y="216.6777">Environment</text><polygon fill="#181818" points="299.5,252.7305,309.5,256.7305,299.5,260.7305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="59" x2="305.5" y1="256.7305" y2="256.7305"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="178" x="68" y="249.9883">connect(url, user, password)</text><polygon fill="#181818" points="585.5,286.041,595.5,290.041,585.5,294.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321.5" x2="591.5" y1="290.041" y2="290.041"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="75" x="330.5" y="283.2988">connect(url)</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="597.5" y="264.7305"/><ellipse cx="615.5" cy="282.7305" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M617.9731,288.8735 Q617.3921,289.1724 616.7529,289.3218 Q616.1138,289.4712 615.4082,289.4712 Q612.9014,289.4712 611.5815,287.8193 Q610.2617,286.1675 610.2617,283.0464 Q610.2617,279.917 611.5815,278.2651 Q612.9014,276.6133 615.4082,276.6133 Q616.1138,276.6133 616.7612,276.7627 Q617.4087,276.9121 617.9731,277.2109 L617.9731,279.9336 Q617.3423,279.3525 616.7488,279.0828 Q616.1553,278.813 615.5244,278.813 Q614.1797,278.813 613.4949,279.8796 Q612.8101,280.9463 612.8101,283.0464 Q612.8101,285.1382 613.4949,286.2048 Q614.1797,287.2715 615.5244,287.2715 Q616.1553,287.2715 616.7488,287.0017 Q617.3423,286.7319 617.9731,286.1509 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="73" x="634.5" y="287.2656">Websocket</text><polygon fill="#181818" points="779,333.041,789,337.041,779,341.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="662" x2="785" y1="337.041" y2="337.041"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="52" x="671" y="330.2988">Connect</text><polygon fill="#181818" points="673,347.041,663,351.041,673,355.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="667" x2="790" y1="351.041" y2="351.041"/><polygon fill="#181818" points="332.5,361.041,322.5,365.041,332.5,369.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="326.5" x2="656" y1="365.041" y2="365.041"/><path d="M240,380.041 L327,380.041 L327,391.3516 L317,401.3516 L240,401.3516 L240,380.041 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="455.416" style="stroke:#000000;stroke-width:1.5;" width="707" x="240" y="380.041"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38" x="257" y="395.6094">Login</text><polygon fill="#181818" points="640,422.6621,650,426.6621,640,430.6621" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321.5" x2="646" y1="426.6621" y2="426.6621"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="101" x="330.5" y="419.9199">Login command</text><path d="M537,441.6621 L789,441.6621 L789,452.9727 L779,462.9727 L537,462.9727 L537,441.6621 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="127.2422" style="stroke:#000000;stroke-width:1.5;" width="334" x="537" y="441.6621"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="203" x="554" y="457.2305">Websocket Request/Response</text><path d="M547,467.9727 L547,496.9727 L767,496.9727 L767,477.9727 L757,467.9727 L547,467.9727 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M757,467.9727 L757,477.9727 L767,477.9727 L757,467.9727 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="195" x="555" y="487.541">See details in separate diagram</text><polygon fill="#181818" points="779,523.5938,789,527.5938,779,531.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="662" x2="785" y1="527.5938" y2="527.5938"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="101" x="671" y="520.8516">Login command</text><polygon fill="#181818" points="673,556.9043,663,560.9043,673,564.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="667" x2="790" y1="560.9043" y2="560.9043"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="96" x="681" y="554.1621">Login response</text><polygon fill="#181818" points="332.5,577.9043,322.5,581.9043,332.5,585.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="326.5" x2="656" y1="581.9043" y2="581.9043"/><line style="stroke:#181818;stroke-width:1.0;" x1="321.5" x2="363.5" y1="630.5254" y2="630.5254"/><line style="stroke:#181818;stroke-width:1.0;" x1="363.5" x2="363.5" y1="630.5254" y2="643.5254"/><line style="stroke:#181818;stroke-width:1.0;" x1="322.5" x2="363.5" y1="643.5254" y2="643.5254"/><polygon fill="#181818" points="332.5,639.5254,322.5,643.5254,332.5,647.5254" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="111" x="330.5" y="608.4727">Encrypt password</text><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="96" x="330.5" y="623.7832">with public key</text><polygon fill="#181818" points="640,688.1465,650,692.1465,640,696.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321.5" x2="646" y1="692.1465" y2="692.1465"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="214" x="330.5" y="670.0938">send_login_credentials(username,</text><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="133" x="330.5" y="685.4043">encrypted_password)</text><polygon fill="#181818" points="779,702.1465,789,706.1465,779,710.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="662" x2="785" y1="706.1465" y2="706.1465"/><line style="stroke:#181818;stroke-width:1.0;" x1="801" x2="843" y1="739.457" y2="739.457"/><line style="stroke:#181818;stroke-width:1.0;" x1="843" x2="843" y1="739.457" y2="752.457"/><line style="stroke:#181818;stroke-width:1.0;" x1="802" x2="843" y1="752.457" y2="752.457"/><polygon fill="#181818" points="812,748.457,802,752.457,812,756.457" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="123" x="810" y="732.7148">Validate credentials</text><polygon fill="#181818" points="673,762.457,663,766.457,673,770.457" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="667" x2="790" y1="766.457" y2="766.457"/><polygon fill="#181818" points="332.5,776.457,322.5,780.457,332.5,784.457" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="326.5" x2="656" y1="780.457" y2="780.457"/><polygon fill="#181818" points="450.5,809.7676,460.5,813.7676,450.5,817.7676" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321.5" x2="456.5" y1="813.7676" y2="813.7676"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="113" x="330.5" y="807.0254">create(session_id)</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="462.5" y="788.457"/><ellipse cx="480.5" cy="806.457" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M482.9731,812.6001 Q482.3921,812.8989 481.7529,813.0483 Q481.1138,813.1978 480.4082,813.1978 Q477.9014,813.1978 476.5815,811.5459 Q475.2617,809.894 475.2617,806.7729 Q475.2617,803.6436 476.5815,801.9917 Q477.9014,800.3398 480.4082,800.3398 Q481.1138,800.3398 481.7612,800.4893 Q482.4087,800.6387 482.9731,800.9375 L482.9731,803.6602 Q482.3423,803.0791 481.7488,802.8093 Q481.1553,802.5396 480.5244,802.5396 Q479.1797,802.5396 478.4949,803.6062 Q477.8101,804.6729 477.8101,806.7729 Q477.8101,808.8647 478.4949,809.9314 Q479.1797,810.998 480.5244,810.998 Q481.1553,810.998 481.7488,810.7283 Q482.3423,810.4585 482.9731,809.8774 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="79" x="499.5" y="810.9922">Connection</text><polygon fill="#181818" points="70,863.7676,60,867.7676,70,871.7676" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="315.5" y1="867.7676" y2="867.7676"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="70" x="78" y="861.0254">connection</text><rect height="47.4434" style="stroke:#000000;stroke-width:1.5;fill:none;" width="588.5" x="2" y="875.7676"/><path d="M2,875.7676 L70,875.7676 L70,886.7676 L60,896.7676 L2,896.7676 L2,875.7676 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="17" y="892.3359">ref</text><text fill="#000000" font-family="Calibri" font-size="12" lengthAdjust="spacing" textLength="295" x="148.75" y="914.3691">Use connection, e.g. connection:execute(statement)</text><!--MD5=[d954af38088a56790f93567163cb85c8]
@startuml seq_connection
!include ../clean.skin

title: Connecting to the Database

participant "Client Code" as client <<external>>
box "Exasol Driver for Lua"
participant "Entry Point"  as entry
participant Environment as env << (C,#ADD1B2) >>
participant Connection as conn << (C,#ADD1B2) >>
participant Websocket as ws << (C,#ADD1B2) >>
end box
participant "Exasol Database" as db

activate client
activate db
client -> entry: exasol()
activate entry
create env
entry -> env: create()
client <- - entry: Environment
deactivate entry
client -> env: connect(url, user, password)
activate env
' [dsn -> req~connect-with-username-password~1 >> impl,utest,itest]
create ws
env -> ws: connect(url)
activate ws
ws -> db: Connect
db - -> ws
ws - -> env
deactivate ws
group Login
    env -> ws: Login command
    activate ws
    group Websocket Request/Response
        note over ws: See details in separate diagram
        ws -> db: Login command
        db - -> ws: Login response
    end
    ws - -> env
    deactivate ws
    env -> env: Encrypt password\nwith public key
    env -> ws: send_login_credentials(username,\nencrypted_password)
    activate ws
    ws -> db
    db -> db: Validate credentials
    db - -> ws
    ws - -> env
    deactivate ws
    create conn
    env -> conn: create(session_id)
end
client <- - env: connection
deactivate env
ref over client, conn: Use connection, e.g. connection:execute(statement)
@enduml

@startuml seq_connection
hide empty methods
hide empty attributes
skinparam style strictuml
skinparam classAttributeIconSize 0
!pragma horizontalLineBetweenDifferentPackageAllowed

skinparam defaultFontName Calibri

skinparam padding 2

title: Connecting to the Database

participant "Client Code" as client <<external>>
box "Exasol Driver for Lua"
participant "Entry Point"  as entry
participant Environment as env << (C,#ADD1B2) >>
participant Connection as conn << (C,#ADD1B2) >>
participant Websocket as ws << (C,#ADD1B2) >>
end box
participant "Exasol Database" as db

activate client
activate db
client -> entry: exasol()
activate entry
create env
entry -> env: create()
client <- - entry: Environment
deactivate entry
client -> env: connect(url, user, password)
activate env
create ws
env -> ws: connect(url)
activate ws
ws -> db: Connect
db - -> ws
ws - -> env
deactivate ws
group Login
    env -> ws: Login command
    activate ws
    group Websocket Request/Response
        note over ws: See details in separate diagram
        ws -> db: Login command
        db - -> ws: Login response
    end
    ws - -> env
    deactivate ws
    env -> env: Encrypt password\nwith public key
    env -> ws: send_login_credentials(username,\nencrypted_password)
    activate ws
    ws -> db
    db -> db: Validate credentials
    db - -> ws
    ws - -> env
    deactivate ws
    create conn
    env -> conn: create(session_id)
end
client <- - env: connection
deactivate env
ref over client, conn: Use connection, e.g. connection:execute(statement)
@enduml

PlantUML version 1.2022.2(Sat Mar 05 17:30:19 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>