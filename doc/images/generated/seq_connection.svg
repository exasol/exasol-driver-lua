<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="911px" preserveAspectRatio="none" style="width:1080px;height:911px;background:#FFFFFF;" version="1.1" viewBox="0 0 1080 911" width="1080px" zoomAndPan="magnify"><defs/><g><rect height="30.4883" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="214" x="434.75" y="10"/><text fill="#000000" font-family="Calibri" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="200" x="441.75" y="30.5352">Connecting to the Database</text><rect fill="#DDDDDD" height="850.9004" style="stroke:#181818;stroke-width:0.5;" width="619" x="111" y="47.4883"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141" x="350" y="62.0566">Exasol Driver for Lua</text><rect fill="#FFFFFF" height="708.9688" style="stroke:#181818;stroke-width:1.0;" width="10" x="290.5" y="186.4199"/><rect fill="#FFFFFF" height="53" style="stroke:#181818;stroke-width:1.0;" width="10" x="529.5" y="842.3887"/><rect fill="#FFFFFF" height="595.3477" style="stroke:#181818;stroke-width:1.0;" width="10" x="661.5" y="300.041"/><rect fill="#FFFFFF" height="777.5898" style="stroke:#181818;stroke-width:1.0;" width="10" x="918.5" y="117.7988"/><rect height="502.0371" style="stroke:#000000;stroke-width:1.5;fill:none;" width="855.5" x="219" y="352.041"/><rect height="127.2422" style="stroke:#000000;stroke-width:1.5;fill:none;" width="452.5" x="546" y="413.6621"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="54" x2="54" y1="107.7988" y2="904.3887"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="161" x2="161" y1="107.7988" y2="904.3887"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="295" x2="295" y1="184.6094" y2="904.3887"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="534" x2="534" y1="840.5781" y2="904.3887"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="666" x2="666" y1="298.2305" y2="904.3887"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="923.5" x2="923.5" y1="107.7988" y2="904.3887"/><rect fill="#E2E2F0" height="50.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="5" y="55.8223"/><text fill="#000000" font-family="Calibri" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="18.5" y="78.3574">«external»</text><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="80" x="14" y="94.8457">Client Code</text><rect fill="#E2E2F0" height="34.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="115" y="72.3105"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="74" x="124" y="94.8457">Entry Point</text><rect fill="#E2E2F0" height="34.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="858.5" y="72.3105"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="112" x="867.5" y="94.8457">Exasol Database</text><rect fill="#FFFFFF" height="708.9688" style="stroke:#181818;stroke-width:1.0;" width="10" x="290.5" y="186.4199"/><rect fill="#FFFFFF" height="53" style="stroke:#181818;stroke-width:1.0;" width="10" x="529.5" y="842.3887"/><rect fill="#FFFFFF" height="595.3477" style="stroke:#181818;stroke-width:1.0;" width="10" x="661.5" y="300.041"/><rect fill="#FFFFFF" height="777.5898" style="stroke:#181818;stroke-width:1.0;" width="10" x="918.5" y="117.7988"/><polygon fill="#181818" points="149,139.1094,159,143.1094,149,147.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="155" y1="143.1094" y2="143.1094"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="49" x="63" y="136.3672">exasol()</text><polygon fill="#181818" points="217,172.4199,227,176.4199,217,180.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="161" x2="223" y1="176.4199" y2="176.4199"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="40" x="170" y="169.6777">Create</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="229" y="151.1094"/><ellipse cx="247" cy="169.1094" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M249.4731,175.2524 Q248.8921,175.5513 248.2529,175.7007 Q247.6138,175.8501 246.9082,175.8501 Q244.4014,175.8501 243.0815,174.1982 Q241.7617,172.5464 241.7617,169.4253 Q241.7617,166.2959 243.0815,164.644 Q244.4014,162.9922 246.9082,162.9922 Q247.6138,162.9922 248.2612,163.1416 Q248.9087,163.291 249.4731,163.5898 L249.4731,166.3125 Q248.8423,165.7314 248.2488,165.4617 Q247.6553,165.1919 247.0244,165.1919 Q245.6797,165.1919 244.9949,166.2585 Q244.3101,167.3252 244.3101,169.4253 Q244.3101,171.5171 244.9949,172.5837 Q245.6797,173.6504 247.0244,173.6504 Q247.6553,173.6504 248.2488,173.3806 Q248.8423,173.1108 249.4731,172.5298 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="87" x="266" y="173.6445">Environment</text><polygon fill="#181818" points="65,219.4199,55,223.4199,65,227.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59" x2="160" y1="223.4199" y2="223.4199"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="79" x="73" y="216.6777">Environment</text><polygon fill="#181818" points="278.5,252.7305,288.5,256.7305,278.5,260.7305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="284.5" y1="256.7305" y2="256.7305"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="58" x="63" y="249.9883">connect()</text><polygon fill="#181818" points="595,286.041,605,290.041,595,294.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="300.5" x2="601" y1="290.041" y2="290.041"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="52" x="309.5" y="283.2988">Connect</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="607" y="264.7305"/><ellipse cx="625" cy="282.7305" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M627.4731,288.8735 Q626.8921,289.1724 626.2529,289.3218 Q625.6138,289.4712 624.9082,289.4712 Q622.4014,289.4712 621.0815,287.8193 Q619.7617,286.1675 619.7617,283.0464 Q619.7617,279.917 621.0815,278.2651 Q622.4014,276.6133 624.9082,276.6133 Q625.6138,276.6133 626.2612,276.7627 Q626.9087,276.9121 627.4731,277.2109 L627.4731,279.9336 Q626.8423,279.3525 626.2488,279.0828 Q625.6553,278.813 625.0244,278.813 Q623.6797,278.813 622.9949,279.8796 Q622.3101,280.9463 622.3101,283.0464 Q622.3101,285.1382 622.9949,286.2048 Q623.6797,287.2715 625.0244,287.2715 Q625.6553,287.2715 626.2488,287.0017 Q626.8423,286.7319 627.4731,286.1509 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="73" x="644" y="287.2656">Websocket</text><polygon fill="#181818" points="906.5,333.041,916.5,337.041,906.5,341.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="671.5" x2="912.5" y1="337.041" y2="337.041"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="52" x="680.5" y="330.2988">Connect</text><path d="M219,352.041 L306,352.041 L306,363.3516 L296,373.3516 L219,373.3516 L219,352.041 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="502.0371" style="stroke:#000000;stroke-width:1.5;" width="855.5" x="219" y="352.041"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38" x="236" y="367.6094">Login</text><polygon fill="#181818" points="649.5,394.6621,659.5,398.6621,649.5,402.6621" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="300.5" x2="655.5" y1="398.6621" y2="398.6621"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="101" x="309.5" y="391.9199">Login command</text><path d="M546,413.6621 L798,413.6621 L798,424.9727 L788,434.9727 L546,434.9727 L546,413.6621 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="127.2422" style="stroke:#000000;stroke-width:1.5;" width="452.5" x="546" y="413.6621"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="203" x="563" y="429.2305">Websocket Request/Response</text><path d="M556,439.9727 L556,468.9727 L776,468.9727 L776,449.9727 L766,439.9727 L556,439.9727 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M766,439.9727 L766,449.9727 L776,449.9727 L766,439.9727 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="195" x="564" y="459.541">See details in separate diagram</text><polygon fill="#181818" points="906.5,495.5938,916.5,499.5938,906.5,503.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="671.5" x2="912.5" y1="499.5938" y2="499.5938"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="101" x="680.5" y="492.8516">Login command</text><polygon fill="#181818" points="682.5,528.9043,672.5,532.9043,682.5,536.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="676.5" x2="917.5" y1="532.9043" y2="532.9043"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="96" x="690.5" y="526.1621">Login response</text><polygon fill="#181818" points="311.5,569.2148,301.5,573.2148,311.5,577.2148" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="305.5" x2="660.5" y1="573.2148" y2="573.2148"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="196" x="319.5" y="566.4727">Login response incl. public key</text><line style="stroke:#181818;stroke-width:1.0;" x1="300.5" x2="342.5" y1="606.5254" y2="606.5254"/><line style="stroke:#181818;stroke-width:1.0;" x1="342.5" x2="342.5" y1="606.5254" y2="619.5254"/><line style="stroke:#181818;stroke-width:1.0;" x1="301.5" x2="342.5" y1="619.5254" y2="619.5254"/><polygon fill="#181818" points="311.5,615.5254,301.5,619.5254,311.5,623.5254" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="211" x="309.5" y="599.7832">Encrypt password with public key</text><polygon fill="#181818" points="649.5,648.8359,659.5,652.8359,649.5,656.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="300.5" x2="655.5" y1="652.8359" y2="652.8359"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="219" x="309.5" y="646.0938">Username and encrypted password</text><polygon fill="#181818" points="906.5,682.1465,916.5,686.1465,906.5,690.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="671.5" x2="912.5" y1="686.1465" y2="686.1465"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="219" x="680.5" y="679.4043">Username and encrypted password</text><line style="stroke:#181818;stroke-width:1.0;" x1="928.5" x2="970.5" y1="719.457" y2="719.457"/><line style="stroke:#181818;stroke-width:1.0;" x1="970.5" x2="970.5" y1="719.457" y2="732.457"/><line style="stroke:#181818;stroke-width:1.0;" x1="929.5" x2="970.5" y1="732.457" y2="732.457"/><polygon fill="#181818" points="939.5,728.457,929.5,732.457,939.5,736.457" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="123" x="937.5" y="712.7148">Validate credentials</text><polygon fill="#181818" points="682.5,761.7676,672.5,765.7676,682.5,769.7676" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="676.5" x2="917.5" y1="765.7676" y2="765.7676"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="66" x="690.5" y="759.0254">Session ID</text><polygon fill="#181818" points="311.5,795.0781,301.5,799.0781,311.5,803.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="305.5" x2="660.5" y1="799.0781" y2="799.0781"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="66" x="319.5" y="792.3359">Session ID</text><polygon fill="#181818" points="460,828.3887,470,832.3887,460,836.3887" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="300.5" x2="466" y1="832.3887" y2="832.3887"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="141" x="309.5" y="825.6465">Create with Session ID</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="472" y="807.0781"/><ellipse cx="490" cy="825.0781" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M492.4731,831.2212 Q491.8921,831.52 491.2529,831.6694 Q490.6138,831.8188 489.9082,831.8188 Q487.4014,831.8188 486.0815,830.167 Q484.7617,828.5151 484.7617,825.394 Q484.7617,822.2646 486.0815,820.6128 Q487.4014,818.9609 489.9082,818.9609 Q490.6138,818.9609 491.2612,819.1104 Q491.9087,819.2598 492.4731,819.5586 L492.4731,822.2813 Q491.8423,821.7002 491.2488,821.4304 Q490.6553,821.1606 490.0244,821.1606 Q488.6797,821.1606 487.9949,822.2273 Q487.3101,823.2939 487.3101,825.394 Q487.3101,827.4858 487.9949,828.5525 Q488.6797,829.6191 490.0244,829.6191 Q490.6553,829.6191 491.2488,829.3494 Q491.8423,829.0796 492.4731,828.4985 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="79" x="509" y="829.6133">Connection</text><polygon fill="#181818" points="65,882.3887,55,886.3887,65,890.3887" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59" x2="289.5" y1="886.3887" y2="886.3887"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="72" x="73" y="879.6465">Connection</text><!--MD5=[39f80c1b85ce6940cbd8d0653478d2ea]
@startuml seq_connection
!include ../clean.skin

title: Connecting to the Database

participant "Client Code" as client <<external>>
box "Exasol Driver for Lua"
participant "Entry Point"  as entry
participant Environment as env << (C,#ADD1B2) >>
participant Connection as conn << (C,#ADD1B2) >>
participant Websocket as ws << (C,#ADD1B2) >>
end box
participant "Exasol Database" as db

activate db
client -> entry: exasol()
create env
entry -> env: Create
activate env
client <- - entry: Environment
client -> env: connect()
' [dsn -> req~connect-with-username-password~1 >> impl,utest,itest]
create ws
env -> ws: Connect
activate ws
ws -> db: Connect
group Login
    env -> ws: Login command
    group Websocket Request/Response
        note over ws: See details in separate diagram
        ws -> db: Login command
        db - -> ws: Login response
    end
    ws - -> env: Login response incl. public key
    env -> env: Encrypt password with public key
    env -> ws: Username and encrypted password
    ws -> db: Username and encrypted password
    db -> db: Validate credentials
    db - -> ws: Session ID
    ws - -> env: Session ID
    create conn
    env -> conn: Create with Session ID
    activate conn
end
activate conn
client <- - env: Connection

@enduml

@startuml seq_connection
hide empty methods
hide empty attributes
skinparam style strictuml
skinparam classAttributeIconSize 0
!pragma horizontalLineBetweenDifferentPackageAllowed

skinparam defaultFontName Calibri

skinparam padding 2

title: Connecting to the Database

participant "Client Code" as client <<external>>
box "Exasol Driver for Lua"
participant "Entry Point"  as entry
participant Environment as env << (C,#ADD1B2) >>
participant Connection as conn << (C,#ADD1B2) >>
participant Websocket as ws << (C,#ADD1B2) >>
end box
participant "Exasol Database" as db

activate db
client -> entry: exasol()
create env
entry -> env: Create
activate env
client <- - entry: Environment
client -> env: connect()
create ws
env -> ws: Connect
activate ws
ws -> db: Connect
group Login
    env -> ws: Login command
    group Websocket Request/Response
        note over ws: See details in separate diagram
        ws -> db: Login command
        db - -> ws: Login response
    end
    ws - -> env: Login response incl. public key
    env -> env: Encrypt password with public key
    env -> ws: Username and encrypted password
    ws -> db: Username and encrypted password
    db -> db: Validate credentials
    db - -> ws: Session ID
    ws - -> env: Session ID
    create conn
    env -> conn: Create with Session ID
    activate conn
end
activate conn
client <- - env: Connection

@enduml

PlantUML version 1.2022.2(Sat Mar 05 17:30:19 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>