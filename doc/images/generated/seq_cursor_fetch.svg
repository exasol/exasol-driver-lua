<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="552px" preserveAspectRatio="none" style="width:789px;height:552px;background:#FFFFFF;" version="1.1" viewBox="0 0 789 552" width="789px" zoomAndPan="magnify"><defs/><g><rect height="30.4883" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="221" x="285.5" y="10"/><text fill="#000000" font-family="Calibri" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="207" x="292.5" y="30.5352">Fetch all rows from a Cursor</text><rect fill="#FFFFFF" height="251.4629" style="stroke:#181818;stroke-width:1.0;" width="10" x="322" y="216.4844"/><rect fill="#FFFFFF" height="42" style="stroke:#181818;stroke-width:1.0;" width="10" x="536" y="293.0156"/><rect fill="#FFFFFF" height="427.9258" style="stroke:#181818;stroke-width:1.0;" width="10" x="693" y="108.4648"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="698" y="307.0156"/><rect height="308.0391" style="stroke:#000000;stroke-width:1.5;fill:none;" width="773" x="10" y="167.9082"/><rect height="157.8418" style="stroke:#000000;stroke-width:1.5;fill:none;" width="502.5" x="270.5" y="231.4844"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="69" x2="69" y1="98.4648" y2="545.3906"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="190" x2="190" y1="98.4648" y2="545.3906"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="326.5" x2="326.5" y1="98.4648" y2="545.3906"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="541" x2="541" y1="98.4648" y2="545.3906"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="698" x2="698" y1="98.4648" y2="545.3906"/><rect fill="#E2E2F0" height="50.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="20" y="46.4883"/><text fill="#000000" font-family="Calibri" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="33.5" y="69.0234">«external»</text><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="80" x="29" y="85.5117">Client Code</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="128" y="61.4648"/><ellipse cx="146" cy="79.4648" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M148.4731,85.6079 Q147.8921,85.9067 147.2529,86.0562 Q146.6138,86.2056 145.9082,86.2056 Q143.4014,86.2056 142.0815,84.5537 Q140.7617,82.9019 140.7617,79.7808 Q140.7617,76.6514 142.0815,74.9995 Q143.4014,73.3477 145.9082,73.3477 Q146.6138,73.3477 147.2612,73.4971 Q147.9087,73.6465 148.4731,73.9453 L148.4731,76.668 Q147.8423,76.0869 147.2488,75.8171 Q146.6553,75.5474 146.0244,75.5474 Q144.6797,75.5474 143.9949,76.614 Q143.3101,77.6807 143.3101,79.7808 Q143.3101,81.8726 143.9949,82.9392 Q144.6797,84.0059 146.0244,84.0059 Q146.6553,84.0059 147.2488,83.7361 Q147.8423,83.4663 148.4731,82.8853 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="79" x="165" y="84">Connection</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="280.5" y="61.4648"/><ellipse cx="298.5" cy="79.4648" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M300.9731,85.6079 Q300.3921,85.9067 299.7529,86.0562 Q299.1138,86.2056 298.4082,86.2056 Q295.9014,86.2056 294.5815,84.5537 Q293.2617,82.9019 293.2617,79.7808 Q293.2617,76.6514 294.5815,74.9995 Q295.9014,73.3477 298.4082,73.3477 Q299.1138,73.3477 299.7612,73.4971 Q300.4087,73.6465 300.9731,73.9453 L300.9731,76.668 Q300.3423,76.0869 299.7488,75.8171 Q299.1553,75.5474 298.5244,75.5474 Q297.1797,75.5474 296.4949,76.614 Q295.8101,77.6807 295.8101,79.7808 Q295.8101,81.8726 296.4949,82.9392 Q297.1797,84.0059 298.5244,84.0059 Q299.1553,84.0059 299.7488,83.7361 Q300.3423,83.4663 300.9731,82.8853 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="47" x="317.5" y="84">Cursor</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="459" y="61.4648"/><ellipse cx="477" cy="79.4648" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M479.4731,85.6079 Q478.8921,85.9067 478.2529,86.0562 Q477.6138,86.2056 476.9082,86.2056 Q474.4014,86.2056 473.0815,84.5537 Q471.7617,82.9019 471.7617,79.7808 Q471.7617,76.6514 473.0815,74.9995 Q474.4014,73.3477 476.9082,73.3477 Q477.6138,73.3477 478.2612,73.4971 Q478.9087,73.6465 479.4731,73.9453 L479.4731,76.668 Q478.8423,76.0869 478.2488,75.8171 Q477.6553,75.5474 477.0244,75.5474 Q475.6797,75.5474 474.9949,76.614 Q474.3101,77.6807 474.3101,79.7808 Q474.3101,81.8726 474.9949,82.9392 Q475.6797,84.0059 477.0244,84.0059 Q477.6553,84.0059 478.2488,83.7361 Q478.8423,83.4663 479.4731,82.8853 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="118" x="496" y="84">ExasolWebsocket</text><rect fill="#E2E2F0" height="34.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="633" y="62.9766"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="112" x="642" y="85.5117">Exasol Database</text><rect fill="#FFFFFF" height="251.4629" style="stroke:#181818;stroke-width:1.0;" width="10" x="322" y="216.4844"/><rect fill="#FFFFFF" height="42" style="stroke:#181818;stroke-width:1.0;" width="10" x="536" y="293.0156"/><rect fill="#FFFFFF" height="427.9258" style="stroke:#181818;stroke-width:1.0;" width="10" x="693" y="108.4648"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="698" y="307.0156"/><rect height="47.4434" style="stroke:#000000;stroke-width:1.5;fill:none;" width="359.5" x="17" y="108.4648"/><path d="M17,108.4648 L85,108.4648 L85,119.4648 L75,129.4648 L17,129.4648 L17,108.4648 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="32" y="125.0332">ref</text><text fill="#000000" font-family="Calibri" font-size="12" lengthAdjust="spacing" textLength="321" x="36.25" y="147.0664">Use connection to execute a statement and get a cursor</text><path d="M10,167.9082 L88,167.9082 L88,179.2188 L78,189.2188 L10,189.2188 L10,167.9082 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="308.0391" style="stroke:#000000;stroke-width:1.5;" width="773" x="10" y="167.9082"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="27" y="183.4766">loop</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="212" x="105" y="182.543">[Fetch results until fetch() returns nil]</text><polygon fill="#181818" points="310,212.4844,320,216.4844,310,220.4844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69" x2="316" y1="216.4844" y2="216.4844"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="40" x="78" y="209.7422">fetch()</text><path d="M270.5,231.4844 L336.5,231.4844 L336.5,242.7949 L326.5,252.7949 L270.5,252.7949 L270.5,231.4844 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="157.8418" style="stroke:#000000;stroke-width:1.5;" width="502.5" x="270.5" y="231.4844"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="287.5" y="247.0527">alt</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="210" x="353.5" y="246.1191">[If DB has returned a resultset handle</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="228" x="353.5" y="259.0742">and no more rows available in local list]</text><polygon fill="#181818" points="524,289.0156,534,293.0156,524,297.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="332" x2="530" y1="293.0156" y2="293.0156"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="181" x="341" y="286.2734">send_fetch(resultset_handle)</text><polygon fill="#181818" points="686,303.0156,696,307.0156,686,311.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="546" x2="692" y1="307.0156" y2="307.0156"/><polygon fill="#181818" points="557,317.0156,547,321.0156,557,325.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="551" x2="692" y1="321.0156" y2="321.0156"/><polygon fill="#181818" points="343,331.0156,333,335.0156,343,339.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="337" x2="540" y1="335.0156" y2="335.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="332" x2="374" y1="368.3262" y2="368.3262"/><line style="stroke:#181818;stroke-width:1.0;" x1="374" x2="374" y1="368.3262" y2="381.3262"/><line style="stroke:#181818;stroke-width:1.0;" x1="333" x2="374" y1="381.3262" y2="381.3262"/><polygon fill="#181818" points="343,377.3262,333,381.3262,343,385.3262" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="137" x="341" y="361.584">Store data in local list</text><line style="stroke:#181818;stroke-width:1.0;" x1="332" x2="374" y1="421.6367" y2="421.6367"/><line style="stroke:#181818;stroke-width:1.0;" x1="374" x2="374" y1="421.6367" y2="434.6367"/><line style="stroke:#181818;stroke-width:1.0;" x1="333" x2="374" y1="434.6367" y2="434.6367"/><polygon fill="#181818" points="343,430.6367,333,434.6367,343,438.6367" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="172" x="341" y="414.8945">Get next row from local list</text><polygon fill="#181818" points="80,463.9473,70,467.9473,80,471.9473" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74" x2="326" y1="467.9473" y2="467.9473"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="225" x="88" y="461.2051">Row or nil if no more rows available</text><rect height="47.4434" style="stroke:#000000;stroke-width:1.5;fill:none;" width="359.5" x="17" y="482.9473"/><path d="M17,482.9473 L85,482.9473 L85,493.9473 L75,503.9473 L17,503.9473 L17,482.9473 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="32" y="499.5156">ref</text><text fill="#000000" font-family="Calibri" font-size="12" lengthAdjust="spacing" textLength="71" x="161.25" y="521.5488">Close cursor</text><!--MD5=[4c74d56c407032752e7c544700b26edb]
@startuml seq_cursor_fetch
!include ../clean.skin

title: Fetch all rows from a Cursor

participant "Client Code" as client <<external>>
participant Connection as conn << (C,#ADD1B2) >>
participant Cursor as cur << (C,#ADD1B2) >>
participant ExasolWebsocket as ws << (C,#ADD1B2) >>
participant "Exasol Database" as db

activate db

ref over client, cur: Use connection to execute a statement and get a cursor

loop Fetch results until fetch() returns nil
    client -> cur: fetch()
    activate cur
    alt If DB has returned a resultset handle\nand no more rows available in local list
        cur -> ws : send_fetch(resultset_handle)
        activate ws
        ws -> db
        activate db
        db - -> ws
        deactivate db
        ws - -> cur
        deactivate ws
        cur -> cur : Store data in local list
    end
    cur -> cur : Get next row from local list
    cur - -> client : Row or nil if no more rows available
    deactivate cur
end

ref over client, cur: Close cursor

@enduml

@startuml seq_cursor_fetch
hide empty methods
hide empty attributes
skinparam style strictuml
skinparam classAttributeIconSize 0
!pragma horizontalLineBetweenDifferentPackageAllowed

skinparam defaultFontName Calibri

skinparam padding 2

title: Fetch all rows from a Cursor

participant "Client Code" as client <<external>>
participant Connection as conn << (C,#ADD1B2) >>
participant Cursor as cur << (C,#ADD1B2) >>
participant ExasolWebsocket as ws << (C,#ADD1B2) >>
participant "Exasol Database" as db

activate db

ref over client, cur: Use connection to execute a statement and get a cursor

loop Fetch results until fetch() returns nil
    client -> cur: fetch()
    activate cur
    alt If DB has returned a resultset handle\nand no more rows available in local list
        cur -> ws : send_fetch(resultset_handle)
        activate ws
        ws -> db
        activate db
        db - -> ws
        deactivate db
        ws - -> cur
        deactivate ws
        cur -> cur : Store data in local list
    end
    cur -> cur : Get next row from local list
    cur - -> client : Row or nil if no more rows available
    deactivate cur
end

ref over client, cur: Close cursor

@enduml

PlantUML version 1.2022.2(Sat Mar 05 17:30:19 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>