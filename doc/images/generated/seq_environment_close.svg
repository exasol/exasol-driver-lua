<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="296px" preserveAspectRatio="none" style="width:561px;height:296px;background:#FFFFFF;" version="1.1" viewBox="0 0 561 296" width="561px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="277.9512" style="stroke:#181818;stroke-width:0.5;" width="276" x="133.5" y="6"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141" x="201" y="20.5684">Exasol Driver for Lua</text><rect fill="#FFFFFF" height="204.6406" style="stroke:#181818;stroke-width:1.0;" width="10" x="49" y="76.3105"/><rect fill="#FFFFFF" height="170.3301" style="stroke:#181818;stroke-width:1.0;" width="10" x="199" y="101.6211"/><rect fill="#FFFFFF" height="66.4434" style="stroke:#181818;stroke-width:1.0;" width="10" x="338" y="165.1973"/><rect fill="#FFFFFF" height="204.6406" style="stroke:#181818;stroke-width:1.0;" width="10" x="475.5" y="76.3105"/><rect height="123.0195" style="stroke:#000000;stroke-width:1.5;fill:none;" width="428" x="127.5" y="116.6211"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="54" x2="54" y1="66.3105" y2="289.9512"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="203.5" x2="203.5" y1="66.3105" y2="289.9512"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="342.5" x2="342.5" y1="66.3105" y2="289.9512"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="480.5" x2="480.5" y1="66.3105" y2="289.9512"/><rect fill="#E2E2F0" height="50.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="5" y="14.334"/><text fill="#000000" font-family="Calibri" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="18.5" y="36.8691">«external»</text><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="80" x="14" y="53.3574">Client Code</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="137.5" y="29.3105"/><ellipse cx="155.5" cy="47.3105" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M157.9731,53.4536 Q157.3921,53.7524 156.7529,53.9019 Q156.1138,54.0513 155.4082,54.0513 Q152.9014,54.0513 151.5815,52.3994 Q150.2617,50.7476 150.2617,47.6265 Q150.2617,44.4971 151.5815,42.8452 Q152.9014,41.1934 155.4082,41.1934 Q156.1138,41.1934 156.7612,41.3428 Q157.4087,41.4922 157.9731,41.791 L157.9731,44.5137 Q157.3423,43.9326 156.7488,43.6628 Q156.1553,43.3931 155.5244,43.3931 Q154.1797,43.3931 153.4949,44.4597 Q152.8101,45.5264 152.8101,47.6265 Q152.8101,49.7183 153.4949,50.7849 Q154.1797,51.8516 155.5244,51.8516 Q156.1553,51.8516 156.7488,51.5818 Q157.3423,51.312 157.9731,50.731 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="87" x="174.5" y="51.8457">Environment</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="280.5" y="29.3105"/><ellipse cx="298.5" cy="47.3105" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M300.9731,53.4536 Q300.3921,53.7524 299.7529,53.9019 Q299.1138,54.0513 298.4082,54.0513 Q295.9014,54.0513 294.5815,52.3994 Q293.2617,50.7476 293.2617,47.6265 Q293.2617,44.4971 294.5815,42.8452 Q295.9014,41.1934 298.4082,41.1934 Q299.1138,41.1934 299.7612,41.3428 Q300.4087,41.4922 300.9731,41.791 L300.9731,44.5137 Q300.3423,43.9326 299.7488,43.6628 Q299.1553,43.3931 298.5244,43.3931 Q297.1797,43.3931 296.4949,44.4597 Q295.8101,45.5264 295.8101,47.6265 Q295.8101,49.7183 296.4949,50.7849 Q297.1797,51.8516 298.5244,51.8516 Q299.1553,51.8516 299.7488,51.5818 Q300.3423,51.312 300.9731,50.731 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="79" x="317.5" y="51.8457">Connection</text><rect fill="#E2E2F0" height="34.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="415.5" y="30.8223"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="112" x="424.5" y="53.3574">Exasol Database</text><rect fill="#FFFFFF" height="204.6406" style="stroke:#181818;stroke-width:1.0;" width="10" x="49" y="76.3105"/><rect fill="#FFFFFF" height="170.3301" style="stroke:#181818;stroke-width:1.0;" width="10" x="199" y="101.6211"/><rect fill="#FFFFFF" height="66.4434" style="stroke:#181818;stroke-width:1.0;" width="10" x="338" y="165.1973"/><rect fill="#FFFFFF" height="204.6406" style="stroke:#181818;stroke-width:1.0;" width="10" x="475.5" y="76.3105"/><polygon fill="#181818" points="187,97.6211,197,101.6211,187,105.6211" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="59" x2="193" y1="101.6211" y2="101.6211"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="41" x="68" y="94.8789">close()</text><path d="M127.5,116.6211 L205.5,116.6211 L205.5,127.9316 L195.5,137.9316 L127.5,137.9316 L127.5,116.6211 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="123.0195" style="stroke:#000000;stroke-width:1.5;" width="428" x="127.5" y="116.6211"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="144.5" y="132.1895">loop</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="114" x="222.5" y="131.2559">[for all connections]</text><polygon fill="#181818" points="326,161.1973,336,165.1973,326,169.1973" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="209" x2="332" y1="165.1973" y2="165.1973"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="41" x="218" y="158.4551">close()</text><rect height="47.4434" style="stroke:#000000;stroke-width:1.5;fill:none;" width="271" x="277.5" y="173.1973"/><path d="M277.5,173.1973 L345.5,173.1973 L345.5,184.1973 L335.5,194.1973 L277.5,194.1973 L277.5,173.1973 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="292.5" y="189.7656">ref</text><text fill="#000000" font-family="Calibri" font-size="12" lengthAdjust="spacing" textLength="185" x="320.5" y="211.7988">Close connection and its cursors</text><polygon fill="#181818" points="220,227.6406,210,231.6406,220,235.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="214" x2="342" y1="231.6406" y2="231.6406"/><line style="stroke:#A80036;stroke-width:2.0;" x1="334" x2="352" y1="222.6406" y2="240.6406"/><line style="stroke:#A80036;stroke-width:2.0;" x1="334" x2="352" y1="240.6406" y2="222.6406"/><polygon fill="#181818" points="70,267.9512,60,271.9512,70,275.9512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="203" y1="271.9512" y2="271.9512"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="112" x="78" y="265.209">Success (boolean)</text><line style="stroke:#A80036;stroke-width:2.0;" x1="195" x2="213" y1="262.9512" y2="280.9512"/><line style="stroke:#A80036;stroke-width:2.0;" x1="195" x2="213" y1="280.9512" y2="262.9512"/><!--MD5=[ddd62ca952efce0b8729a00ae31ca7f9]
@startuml seq_environment_close
!include ../clean.skin

participant "Client Code" as client <<external>>
box "Exasol Driver for Lua"
    participant Environment as env << (C,#ADD1B2) >>
    participant Connection as conn << (C,#ADD1B2) >>
end box
participant "Exasol Database" as db

activate client
activate db

' [dsn -> req~luasql-environment-close~1 >> impl,utest,itest]
client -> env : close()
activate env
loop for all connections
    env -> conn : close()
    activate conn
    ref over conn, db: Close connection and its cursors
    conn - -> env
    destroy conn
end
env - -> client: Success (boolean)
destroy env

@enduml

@startuml seq_environment_close
hide empty methods
hide empty attributes
skinparam style strictuml
skinparam classAttributeIconSize 0
!pragma horizontalLineBetweenDifferentPackageAllowed

skinparam defaultFontName Calibri

skinparam padding 2

participant "Client Code" as client <<external>>
box "Exasol Driver for Lua"
    participant Environment as env << (C,#ADD1B2) >>
    participant Connection as conn << (C,#ADD1B2) >>
end box
participant "Exasol Database" as db

activate client
activate db

client -> env : close()
activate env
loop for all connections
    env -> conn : close()
    activate conn
    ref over conn, db: Close connection and its cursors
    conn - -> env
    destroy conn
end
env - -> client: Success (boolean)
destroy env

@enduml

PlantUML version 1.2022.2(Sat Mar 05 17:30:19 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>