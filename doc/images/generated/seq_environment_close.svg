<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="353px" preserveAspectRatio="none" style="width:1030px;height:353px;background:#FFFFFF;" version="1.1" viewBox="0 0 1030 353" width="1030px" zoomAndPan="magnify"><defs/><g><rect height="30.4883" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="193" x="420.25" y="10"/><text fill="#000000" font-family="Calibri" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="179" x="427.25" y="30.5352">Closing the Environment</text><rect fill="#DDDDDD" height="292.9277" style="stroke:#181818;stroke-width:0.5;" width="745" x="133.5" y="47.4883"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141" x="435.5" y="62.0566">Exasol Driver for Lua</text><rect fill="#FFFFFF" height="204.6406" style="stroke:#181818;stroke-width:1.0;" width="10" x="49" y="132.7754"/><rect fill="#FFFFFF" height="170.3301" style="stroke:#181818;stroke-width:1.0;" width="10" x="199" y="158.0859"/><rect fill="#FFFFFF" height="66.4434" style="stroke:#181818;stroke-width:1.0;" width="10" x="338" y="221.6621"/><rect fill="#FFFFFF" height="204.6406" style="stroke:#181818;stroke-width:1.0;" width="10" x="944.5" y="132.7754"/><rect height="123.0195" style="stroke:#000000;stroke-width:1.5;fill:none;" width="897" x="127.5" y="173.0859"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="54" x2="54" y1="122.7754" y2="346.416"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="203.5" x2="203.5" y1="122.7754" y2="346.416"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="342.5" x2="342.5" y1="122.7754" y2="346.416"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="497.5" x2="497.5" y1="122.7754" y2="346.416"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="648.5" x2="648.5" y1="122.7754" y2="346.416"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="796.5" x2="796.5" y1="122.7754" y2="346.416"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="949.5" x2="949.5" y1="122.7754" y2="346.416"/><rect fill="#E2E2F0" height="50.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="5" y="70.7988"/><text fill="#000000" font-family="Calibri" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="18.5" y="93.334">«external»</text><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="80" x="14" y="109.8223">Client Code</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="137.5" y="85.7754"/><ellipse cx="155.5" cy="103.7754" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M157.9731,109.9185 Q157.3921,110.2173 156.7529,110.3667 Q156.1138,110.5161 155.4082,110.5161 Q152.9014,110.5161 151.5815,108.8643 Q150.2617,107.2124 150.2617,104.0913 Q150.2617,100.9619 151.5815,99.3101 Q152.9014,97.6582 155.4082,97.6582 Q156.1138,97.6582 156.7612,97.8076 Q157.4087,97.957 157.9731,98.2559 L157.9731,100.9785 Q157.3423,100.3975 156.7488,100.1277 Q156.1553,99.8579 155.5244,99.8579 Q154.1797,99.8579 153.4949,100.9246 Q152.8101,101.9912 152.8101,104.0913 Q152.8101,106.1831 153.4949,107.2498 Q154.1797,108.3164 155.5244,108.3164 Q156.1553,108.3164 156.7488,108.0466 Q157.3423,107.7769 157.9731,107.1958 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="87" x="174.5" y="108.3105">Environment</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="280.5" y="85.7754"/><ellipse cx="298.5" cy="103.7754" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M300.9731,109.9185 Q300.3921,110.2173 299.7529,110.3667 Q299.1138,110.5161 298.4082,110.5161 Q295.9014,110.5161 294.5815,108.8643 Q293.2617,107.2124 293.2617,104.0913 Q293.2617,100.9619 294.5815,99.3101 Q295.9014,97.6582 298.4082,97.6582 Q299.1138,97.6582 299.7612,97.8076 Q300.4087,97.957 300.9731,98.2559 L300.9731,100.9785 Q300.3423,100.3975 299.7488,100.1277 Q299.1553,99.8579 298.5244,99.8579 Q297.1797,99.8579 296.4949,100.9246 Q295.8101,101.9912 295.8101,104.0913 Q295.8101,106.1831 296.4949,107.2498 Q297.1797,108.3164 298.5244,108.3164 Q299.1553,108.3164 299.7488,108.0466 Q300.3423,107.7769 300.9731,107.1958 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="79" x="317.5" y="108.3105">Connection</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="415.5" y="85.7754"/><ellipse cx="433.5" cy="103.7754" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M435.9731,109.9185 Q435.3921,110.2173 434.7529,110.3667 Q434.1138,110.5161 433.4082,110.5161 Q430.9014,110.5161 429.5815,108.8643 Q428.2617,107.2124 428.2617,104.0913 Q428.2617,100.9619 429.5815,99.3101 Q430.9014,97.6582 433.4082,97.6582 Q434.1138,97.6582 434.7612,97.8076 Q435.4087,97.957 435.9731,98.2559 L435.9731,100.9785 Q435.3423,100.3975 434.7488,100.1277 Q434.1553,99.8579 433.5244,99.8579 Q432.1797,99.8579 431.4949,100.9246 Q430.8101,101.9912 430.8101,104.0913 Q430.8101,106.1831 431.4949,107.2498 Q432.1797,108.3164 433.5244,108.3164 Q434.1553,108.3164 434.7488,108.0466 Q435.3423,107.7769 435.9731,107.1958 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="118" x="452.5" y="108.3105">ExasolWebsocket</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="589.5" y="85.7754"/><ellipse cx="607.5" cy="103.7754" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M609.9731,109.9185 Q609.3921,110.2173 608.7529,110.3667 Q608.1138,110.5161 607.4082,110.5161 Q604.9014,110.5161 603.5815,108.8643 Q602.2617,107.2124 602.2617,104.0913 Q602.2617,100.9619 603.5815,99.3101 Q604.9014,97.6582 607.4082,97.6582 Q608.1138,97.6582 608.7612,97.8076 Q609.4087,97.957 609.9731,98.2559 L609.9731,100.9785 Q609.3423,100.3975 608.7488,100.1277 Q608.1553,99.8579 607.5244,99.8579 Q606.1797,99.8579 605.4949,100.9246 Q604.8101,101.9912 604.8101,104.0913 Q604.8101,106.1831 605.4949,107.2498 Q606.1797,108.3164 607.5244,108.3164 Q608.1553,108.3164 608.7488,108.0466 Q609.3423,107.7769 609.9731,107.1958 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="73" x="626.5" y="108.3105">Websocket</text><rect fill="#E2E2F0" height="50.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="156" x="718.5" y="70.7988"/><text fill="#000000" font-family="Calibri" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="138" x="727.5" y="93.334">«Third party library»</text><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="85" x="754" y="109.8223">LuWS Socket</text><rect fill="#E2E2F0" height="34.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="884.5" y="87.2871"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="112" x="893.5" y="109.8223">Exasol Database</text><rect fill="#FFFFFF" height="204.6406" style="stroke:#181818;stroke-width:1.0;" width="10" x="49" y="132.7754"/><rect fill="#FFFFFF" height="170.3301" style="stroke:#181818;stroke-width:1.0;" width="10" x="199" y="158.0859"/><rect fill="#FFFFFF" height="66.4434" style="stroke:#181818;stroke-width:1.0;" width="10" x="338" y="221.6621"/><rect fill="#FFFFFF" height="204.6406" style="stroke:#181818;stroke-width:1.0;" width="10" x="944.5" y="132.7754"/><polygon fill="#181818" points="187,154.0859,197,158.0859,187,162.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="59" x2="193" y1="158.0859" y2="158.0859"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="41" x="68" y="151.3438">close()</text><path d="M127.5,173.0859 L205.5,173.0859 L205.5,184.3965 L195.5,194.3965 L127.5,194.3965 L127.5,173.0859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="123.0195" style="stroke:#000000;stroke-width:1.5;" width="897" x="127.5" y="173.0859"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="144.5" y="188.6543">loop</text><text fill="#000000" font-family="Calibri" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="114" x="222.5" y="187.7207">[for all connections]</text><polygon fill="#181818" points="326,217.6621,336,221.6621,326,225.6621" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="209" x2="332" y1="221.6621" y2="221.6621"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="41" x="218" y="214.9199">close()</text><rect height="47.4434" style="stroke:#000000;stroke-width:1.5;fill:none;" width="740" x="277.5" y="229.6621"/><path d="M277.5,229.6621 L345.5,229.6621 L345.5,240.6621 L335.5,250.6621 L277.5,250.6621 L277.5,229.6621 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="292.5" y="246.2305">ref</text><text fill="#000000" font-family="Calibri" font-size="12" lengthAdjust="spacing" textLength="185" x="555" y="268.2637">Close connection and its cursors</text><polygon fill="#181818" points="220,284.1055,210,288.1055,220,292.1055" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="214" x2="342" y1="288.1055" y2="288.1055"/><line style="stroke:#A80036;stroke-width:2.0;" x1="334" x2="352" y1="279.1055" y2="297.1055"/><line style="stroke:#A80036;stroke-width:2.0;" x1="334" x2="352" y1="297.1055" y2="279.1055"/><polygon fill="#181818" points="70,324.416,60,328.416,70,332.416" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="203" y1="328.416" y2="328.416"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="112" x="78" y="321.6738">Success (boolean)</text><line style="stroke:#A80036;stroke-width:2.0;" x1="195" x2="213" y1="319.416" y2="337.416"/><line style="stroke:#A80036;stroke-width:2.0;" x1="195" x2="213" y1="337.416" y2="319.416"/><!--MD5=[42710ac1cf32889ccd23e647e1829008]
@startuml seq_environment_close
!include ../clean.skin

title: Closing the Environment

participant "Client Code" as client <<external>>
box "Exasol Driver for Lua"
    participant Environment as env << (C,#ADD1B2) >>
    participant Connection as conn << (C,#ADD1B2) >>
    participant ExasolWebsocket as exaws << (C,#ADD1B2) >>
    participant Websocket as ws << (C,#ADD1B2) >>
    participant "LuWS Socket" as luws <<Third party library>>
end box
participant "Exasol Database" as db

activate client
activate db

client -> env : close()
activate env
loop for all connections
    env -> conn : close()
    activate conn
    ref over conn, db: Close connection and its cursors
    conn - -> env
    destroy conn
end
env - -> client: Success (boolean)
destroy env

@enduml

@startuml seq_environment_close
hide empty methods
hide empty attributes
skinparam style strictuml
skinparam classAttributeIconSize 0
!pragma horizontalLineBetweenDifferentPackageAllowed

skinparam defaultFontName Calibri

skinparam padding 2

title: Closing the Environment

participant "Client Code" as client <<external>>
box "Exasol Driver for Lua"
    participant Environment as env << (C,#ADD1B2) >>
    participant Connection as conn << (C,#ADD1B2) >>
    participant ExasolWebsocket as exaws << (C,#ADD1B2) >>
    participant Websocket as ws << (C,#ADD1B2) >>
    participant "LuWS Socket" as luws <<Third party library>>
end box
participant "Exasol Database" as db

activate client
activate db

client -> env : close()
activate env
loop for all connections
    env -> conn : close()
    activate conn
    ref over conn, db: Close connection and its cursors
    conn - -> env
    destroy conn
end
env - -> client: Success (boolean)
destroy env

@enduml

PlantUML version 1.2022.2(Sat Mar 05 17:30:19 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>