<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="996px" preserveAspectRatio="none" style="width:1021px;height:996px;background:#FFFFFF;" version="1.1" viewBox="0 0 1021 996" width="1021px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="977.2754" style="stroke:#181818;stroke-width:0.5;" width="667" x="121" y="6"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141" x="384" y="20.5684">Exasol Driver for Lua</text><rect fill="#FFFFFF" height="903.9648" style="stroke:#181818;stroke-width:1.0;" width="10" x="49" y="76.3105"/><rect fill="#FFFFFF" height="80.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="166" y="101.6211"/><rect fill="#FFFFFF" height="703.5898" style="stroke:#181818;stroke-width:1.0;" width="10" x="334" y="215.2422"/><rect fill="#FFFFFF" height="65" style="stroke:#181818;stroke-width:1.0;" width="10" x="697" y="258.5527"/><rect fill="#FFFFFF" height="189.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="697" y="385.1738"/><rect fill="#FFFFFF" height="146.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="697" y="685.2793"/><rect fill="#FFFFFF" height="903.9648" style="stroke:#181818;stroke-width:1.0;" width="10" x="854" y="76.3105"/><rect fill="#FFFFFF" height="48.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="859" y="486.1055"/><rect fill="#FFFFFF" height="79.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="859" y="718.5898"/><rect height="547.9688" style="stroke:#000000;stroke-width:1.5;fill:none;" width="752.5" x="262.5" y="338.5527"/><rect height="142.5527" style="stroke:#000000;stroke-width:1.5;fill:none;" width="352" x="582" y="400.1738"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="54" x2="54" y1="66.3105" y2="989.2754"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="171" x2="171" y1="66.3105" y2="989.2754"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="338.5" x2="338.5" y1="143.1211" y2="989.2754"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="547" x2="547" y1="873.0215" y2="989.2754"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="702" x2="702" y1="256.7422" y2="989.2754"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="859" x2="859" y1="66.3105" y2="989.2754"/><rect fill="#E2E2F0" height="50.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="5" y="14.334"/><text fill="#000000" font-family="Calibri" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="18.5" y="36.8691">«external»</text><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="80" x="14" y="53.3574">Client Code</text><rect fill="#E2E2F0" height="34.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="125" y="30.8223"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="74" x="134" y="53.3574">Entry Point</text><rect fill="#E2E2F0" height="34.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="794" y="30.8223"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="112" x="803" y="53.3574">Exasol Database</text><rect fill="#FFFFFF" height="903.9648" style="stroke:#181818;stroke-width:1.0;" width="10" x="49" y="76.3105"/><rect fill="#FFFFFF" height="80.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="166" y="101.6211"/><rect fill="#FFFFFF" height="703.5898" style="stroke:#181818;stroke-width:1.0;" width="10" x="334" y="215.2422"/><rect fill="#FFFFFF" height="65" style="stroke:#181818;stroke-width:1.0;" width="10" x="697" y="258.5527"/><rect fill="#FFFFFF" height="189.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="697" y="385.1738"/><rect fill="#FFFFFF" height="146.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="697" y="685.2793"/><rect fill="#FFFFFF" height="903.9648" style="stroke:#181818;stroke-width:1.0;" width="10" x="854" y="76.3105"/><rect fill="#FFFFFF" height="48.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="859" y="486.1055"/><rect fill="#FFFFFF" height="79.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="859" y="718.5898"/><polygon fill="#181818" points="154,97.6211,164,101.6211,154,105.6211" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="59" x2="160" y1="101.6211" y2="101.6211"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="49" x="68" y="94.8789">exasol()</text><polygon fill="#181818" points="260.5,130.9316,270.5,134.9316,260.5,138.9316" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="176" x2="266.5" y1="134.9316" y2="134.9316"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="46" x="185" y="128.1895">create()</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="272.5" y="109.6211"/><ellipse cx="290.5" cy="127.6211" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M292.9731,133.7642 Q292.3921,134.063 291.7529,134.2124 Q291.1138,134.3618 290.4082,134.3618 Q287.9014,134.3618 286.5815,132.71 Q285.2617,131.0581 285.2617,127.937 Q285.2617,124.8076 286.5815,123.1558 Q287.9014,121.5039 290.4082,121.5039 Q291.1138,121.5039 291.7612,121.6533 Q292.4087,121.8027 292.9731,122.1016 L292.9731,124.8242 Q292.3423,124.2432 291.7488,123.9734 Q291.1553,123.7036 290.5244,123.7036 Q289.1797,123.7036 288.4949,124.7703 Q287.8101,125.8369 287.8101,127.937 Q287.8101,130.0288 288.4949,131.0955 Q289.1797,132.1621 290.5244,132.1621 Q291.1553,132.1621 291.7488,131.8923 Q292.3423,131.6226 292.9731,131.0415 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="87" x="309.5" y="132.1563">Environment</text><polygon fill="#181818" points="70,177.9316,60,181.9316,70,185.9316" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="170" y1="181.9316" y2="181.9316"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="79" x="78" y="175.1895">Environment</text><polygon fill="#181818" points="322,211.2422,332,215.2422,322,219.2422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="59" x2="328" y1="215.2422" y2="215.2422"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="252" x="68" y="208.5">connect(host_and_port, user, password)</text><polygon fill="#181818" points="608,244.5527,618,248.5527,608,252.5527" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="344" x2="614" y1="248.5527" y2="248.5527"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="75" x="353" y="241.8105">connect(url)</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="620" y="223.2422"/><ellipse cx="638" cy="241.2422" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M640.4731,247.3853 Q639.8921,247.6841 639.2529,247.8335 Q638.6138,247.9829 637.9082,247.9829 Q635.4014,247.9829 634.0815,246.3311 Q632.7617,244.6792 632.7617,241.5581 Q632.7617,238.4287 634.0815,236.7769 Q635.4014,235.125 637.9082,235.125 Q638.6138,235.125 639.2612,235.2744 Q639.9087,235.4238 640.4731,235.7227 L640.4731,238.4453 Q639.8423,237.8643 639.2488,237.5945 Q638.6553,237.3247 638.0244,237.3247 Q636.6797,237.3247 635.9949,238.3914 Q635.3101,239.458 635.3101,241.5581 Q635.3101,243.6499 635.9949,244.7166 Q636.6797,245.7832 638.0244,245.7832 Q638.6553,245.7832 639.2488,245.5134 Q639.8423,245.2437 640.4731,244.6626 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="118" x="657" y="245.7773">ExasolWebsocket</text><polygon fill="#181818" points="842,291.5527,852,295.5527,842,299.5527" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="707" x2="848" y1="295.5527" y2="295.5527"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="52" x="716" y="288.8105">Connect</text><polygon fill="#181818" points="718,305.5527,708,309.5527,718,313.5527" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="712" x2="853" y1="309.5527" y2="309.5527"/><polygon fill="#181818" points="355,319.5527,345,323.5527,355,327.5527" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="349" x2="701" y1="323.5527" y2="323.5527"/><path d="M262.5,338.5527 L349.5,338.5527 L349.5,349.8633 L339.5,359.8633 L262.5,359.8633 L262.5,338.5527 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="547.9688" style="stroke:#000000;stroke-width:1.5;" width="752.5" x="262.5" y="338.5527"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38" x="279.5" y="354.1211">Login</text><polygon fill="#181818" points="685,381.1738,695,385.1738,685,389.1738" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="344" x2="691" y1="385.1738" y2="385.1738"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="146" x="353" y="378.4316">send_login_command()</text><path d="M582,400.1738 L834,400.1738 L834,411.4844 L824,421.4844 L582,421.4844 L582,400.1738 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="142.5527" style="stroke:#000000;stroke-width:1.5;" width="352" x="582" y="400.1738"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="203" x="599" y="415.7422">Websocket Request/Response</text><path d="M592,426.4844 L592,455.4844 L812,455.4844 L812,436.4844 L802,426.4844 L592,426.4844 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M802,426.4844 L802,436.4844 L812,436.4844 L802,426.4844 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="195" x="600" y="446.0527">See details in separate diagram</text><polygon fill="#181818" points="847,482.1055,857,486.1055,847,490.1055" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="707" x2="853" y1="486.1055" y2="486.1055"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="101" x="716" y="479.3633">Login command</text><polygon fill="#181818" points="718,530.7266,708,534.7266,718,538.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="712" x2="853" y1="534.7266" y2="534.7266"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="96" x="726" y="512.6738">Login response</text><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="96" x="726" y="527.9844">incl. public key</text><polygon fill="#181818" points="355,571.0371,345,575.0371,355,579.0371" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="349" x2="701" y1="575.0371" y2="575.0371"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="64" x="363" y="568.2949">Public key</text><line style="stroke:#181818;stroke-width:1.0;" x1="344" x2="386" y1="623.6582" y2="623.6582"/><line style="stroke:#181818;stroke-width:1.0;" x1="386" x2="386" y1="623.6582" y2="636.6582"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="386" y1="636.6582" y2="636.6582"/><polygon fill="#181818" points="355,632.6582,345,636.6582,355,640.6582" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="111" x="353" y="601.6055">Encrypt password</text><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="96" x="353" y="616.916">with public key</text><polygon fill="#181818" points="685,681.2793,695,685.2793,685,689.2793" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="344" x2="691" y1="685.2793" y2="685.2793"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="214" x="353" y="663.2266">send_login_credentials(username,</text><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="133" x="353" y="678.5371">encrypted_password)</text><polygon fill="#181818" points="847,714.5898,857,718.5898,847,722.5898" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="707" x2="853" y1="718.5898" y2="718.5898"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="71" x="716" y="711.8477">Credentials</text><line style="stroke:#181818;stroke-width:1.0;" x1="869" x2="911" y1="751.9004" y2="751.9004"/><line style="stroke:#181818;stroke-width:1.0;" x1="911" x2="911" y1="751.9004" y2="764.9004"/><line style="stroke:#181818;stroke-width:1.0;" x1="870" x2="911" y1="764.9004" y2="764.9004"/><polygon fill="#181818" points="880,760.9004,870,764.9004,880,768.9004" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="123" x="878" y="745.1582">Validate credentials</text><polygon fill="#181818" points="718,794.2109,708,798.2109,718,802.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="712" x2="853" y1="798.2109" y2="798.2109"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="66" x="726" y="791.4688">Session ID</text><polygon fill="#181818" points="355,827.5215,345,831.5215,355,835.5215" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="349" x2="701" y1="831.5215" y2="831.5215"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="66" x="363" y="824.7793">Session ID</text><polygon fill="#181818" points="473,860.832,483,864.832,473,868.832" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="344" x2="479" y1="864.832" y2="864.832"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="113" x="353" y="858.0898">create(session_id)</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="485" y="839.5215"/><ellipse cx="503" cy="857.5215" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M505.4731,863.6646 Q504.8921,863.9634 504.2529,864.1128 Q503.6138,864.2622 502.9082,864.2622 Q500.4014,864.2622 499.0815,862.6104 Q497.7617,860.9585 497.7617,857.8374 Q497.7617,854.708 499.0815,853.0562 Q500.4014,851.4043 502.9082,851.4043 Q503.6138,851.4043 504.2612,851.5537 Q504.9087,851.7031 505.4731,852.002 L505.4731,854.7246 Q504.8423,854.1436 504.2488,853.8738 Q503.6553,853.604 503.0244,853.604 Q501.6797,853.604 500.9949,854.6707 Q500.3101,855.7373 500.3101,857.8374 Q500.3101,859.9292 500.9949,860.9958 Q501.6797,862.0625 503.0244,862.0625 Q503.6553,862.0625 504.2488,861.7927 Q504.8423,861.5229 505.4731,860.9419 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="79" x="522" y="862.0566">Connection</text><polygon fill="#181818" points="70,914.832,60,918.832,70,922.832" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="338" y1="918.832" y2="918.832"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="70" x="78" y="912.0898">connection</text><rect height="47.4434" style="stroke:#000000;stroke-width:1.5;fill:none;" width="611" x="2" y="926.832"/><path d="M2,926.832 L70,926.832 L70,937.832 L60,947.832 L2,947.832 L2,926.832 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="17" y="943.4004">ref</text><text fill="#000000" font-family="Calibri" font-size="12" lengthAdjust="spacing" textLength="295" x="160" y="965.4336">Use connection, e.g. connection:execute(statement)</text><!--MD5=[09e0ac5773d53477a028bca75d395565]
@startuml seq_environment_connect
!include ../clean.skin

participant "Client Code" as client <<external>>
box "Exasol Driver for Lua"
participant "Entry Point"  as entry
participant Environment as env << (C,#ADD1B2) >>
participant Connection as conn << (C,#ADD1B2) >>
participant ExasolWebsocket as ws << (C,#ADD1B2) >>
end box
participant "Exasol Database" as db

activate client
activate db
client -> entry: exasol()
activate entry
create env
entry -> env: create()
client <- - entry: Environment
deactivate entry
client -> env: connect(host_and_port, user, password)
activate env
' [dsn -> req~connect-with-username-password~1 >> impl,utest,itest]
create ws
env -> ws: connect(url)
activate ws
ws -> db: Connect
db - -> ws
ws - -> env
deactivate ws
group Login
    env -> ws: send_login_command()
    activate ws
    group Websocket Request/Response
        note over ws: See details in separate diagram
        ws -> db: Login command
        activate db
        db - -> ws: Login response\nincl. public key
        deactivate db
    end
    ws - -> env: Public key
    deactivate ws
    env -> env: Encrypt password\nwith public key
    env -> ws: send_login_credentials(username,\nencrypted_password)
    activate ws
    ws -> db: Credentials
    activate db
    db -> db: Validate credentials
    db - -> ws: Session ID
    deactivate db
    ws - -> env: Session ID
    deactivate ws
    create conn
    env -> conn: create(session_id)
end
client <- - env: connection
deactivate env
ref over client, conn: Use connection, e.g. connection:execute(statement)
@enduml

@startuml seq_environment_connect
hide empty methods
hide empty attributes
skinparam style strictuml
skinparam classAttributeIconSize 0
!pragma horizontalLineBetweenDifferentPackageAllowed

skinparam defaultFontName Calibri

skinparam padding 2

participant "Client Code" as client <<external>>
box "Exasol Driver for Lua"
participant "Entry Point"  as entry
participant Environment as env << (C,#ADD1B2) >>
participant Connection as conn << (C,#ADD1B2) >>
participant ExasolWebsocket as ws << (C,#ADD1B2) >>
end box
participant "Exasol Database" as db

activate client
activate db
client -> entry: exasol()
activate entry
create env
entry -> env: create()
client <- - entry: Environment
deactivate entry
client -> env: connect(host_and_port, user, password)
activate env
create ws
env -> ws: connect(url)
activate ws
ws -> db: Connect
db - -> ws
ws - -> env
deactivate ws
group Login
    env -> ws: send_login_command()
    activate ws
    group Websocket Request/Response
        note over ws: See details in separate diagram
        ws -> db: Login command
        activate db
        db - -> ws: Login response\nincl. public key
        deactivate db
    end
    ws - -> env: Public key
    deactivate ws
    env -> env: Encrypt password\nwith public key
    env -> ws: send_login_credentials(username,\nencrypted_password)
    activate ws
    ws -> db: Credentials
    activate db
    db -> db: Validate credentials
    db - -> ws: Session ID
    deactivate db
    ws - -> env: Session ID
    deactivate ws
    create conn
    env -> conn: create(session_id)
end
client <- - env: connection
deactivate env
ref over client, conn: Use connection, e.g. connection:execute(statement)
@enduml

PlantUML version 1.2022.2(Sat Mar 05 17:30:19 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>