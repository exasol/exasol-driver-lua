<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="982px" preserveAspectRatio="none" style="width:1022px;height:982px;background:#FFFFFF;" version="1.1" viewBox="0 0 1022 982" width="1022px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="963.9414" style="stroke:#181818;stroke-width:0.5;" width="673" x="115" y="6"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141" x="381" y="20.5684">Exasol Driver for Lua</text><rect fill="#FFFFFF" height="875.6543" style="stroke:#181818;stroke-width:1.0;" width="10" x="49" y="91.2871"/><rect fill="#FFFFFF" height="80.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="166" y="116.5977"/><rect fill="#FFFFFF" height="675.2793" style="stroke:#181818;stroke-width:1.0;" width="10" x="334" y="230.2188"/><rect fill="#FFFFFF" height="65" style="stroke:#181818;stroke-width:1.0;" width="10" x="697" y="273.5293"/><rect fill="#FFFFFF" height="161.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="697" y="400.1504"/><rect fill="#FFFFFF" height="146.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="697" y="671.9453"/><rect fill="#FFFFFF" height="875.6543" style="stroke:#181818;stroke-width:1.0;" width="10" x="854" y="91.2871"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="859" y="310.5293"/><rect fill="#FFFFFF" height="94.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="859" y="433.4609"/><rect fill="#FFFFFF" height="79.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="859" y="705.2559"/><rect height="519.6582" style="stroke:#000000;stroke-width:1.5;fill:none;" width="753.5" x="262.5" y="353.5293"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="54" x2="54" y1="81.2871" y2="975.9414"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="171" x2="171" y1="81.2871" y2="975.9414"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="338.5" x2="338.5" y1="158.0977" y2="975.9414"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="547" x2="547" y1="859.6875" y2="975.9414"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="702" x2="702" y1="271.7188" y2="975.9414"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="859" x2="859" y1="81.2871" y2="975.9414"/><rect fill="#E2E2F0" height="50.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="5" y="29.3105"/><text fill="#000000" font-family="Calibri" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="18.5" y="51.8457">«external»</text><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="80" x="14" y="68.334">Client Code</text><rect fill="#E2E2F0" height="50.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="119" y="29.3105"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="86" x="128" y="51.8457">luasqlexasol</text><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="40" x="151" y="68.334">driver</text><rect fill="#E2E2F0" height="34.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="794" y="45.7988"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="112" x="803" y="68.334">Exasol Database</text><rect fill="#FFFFFF" height="875.6543" style="stroke:#181818;stroke-width:1.0;" width="10" x="49" y="91.2871"/><rect fill="#FFFFFF" height="80.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="166" y="116.5977"/><rect fill="#FFFFFF" height="675.2793" style="stroke:#181818;stroke-width:1.0;" width="10" x="334" y="230.2188"/><rect fill="#FFFFFF" height="65" style="stroke:#181818;stroke-width:1.0;" width="10" x="697" y="273.5293"/><rect fill="#FFFFFF" height="161.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="697" y="400.1504"/><rect fill="#FFFFFF" height="146.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="697" y="671.9453"/><rect fill="#FFFFFF" height="875.6543" style="stroke:#181818;stroke-width:1.0;" width="10" x="854" y="91.2871"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="859" y="310.5293"/><rect fill="#FFFFFF" height="94.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="859" y="433.4609"/><rect fill="#FFFFFF" height="79.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="859" y="705.2559"/><polygon fill="#181818" points="154,112.5977,164,116.5977,154,120.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="59" x2="160" y1="116.5977" y2="116.5977"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="49" x="68" y="109.8555">exasol()</text><polygon fill="#181818" points="260.5,145.9082,270.5,149.9082,260.5,153.9082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="176" x2="266.5" y1="149.9082" y2="149.9082"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="46" x="185" y="143.166">create()</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="272.5" y="124.5977"/><ellipse cx="290.5" cy="142.5977" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M292.9731,148.7407 Q292.3921,149.0396 291.7529,149.189 Q291.1138,149.3384 290.4082,149.3384 Q287.9014,149.3384 286.5815,147.6865 Q285.2617,146.0347 285.2617,142.9136 Q285.2617,139.7842 286.5815,138.1323 Q287.9014,136.4805 290.4082,136.4805 Q291.1138,136.4805 291.7612,136.6299 Q292.4087,136.7793 292.9731,137.0781 L292.9731,139.8008 Q292.3423,139.2197 291.7488,138.95 Q291.1553,138.6802 290.5244,138.6802 Q289.1797,138.6802 288.4949,139.7468 Q287.8101,140.8135 287.8101,142.9136 Q287.8101,145.0054 288.4949,146.072 Q289.1797,147.1387 290.5244,147.1387 Q291.1553,147.1387 291.7488,146.8689 Q292.3423,146.5991 292.9731,146.0181 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="87" x="309.5" y="147.1328">Environment</text><polygon fill="#181818" points="70,192.9082,60,196.9082,70,200.9082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="170" y1="196.9082" y2="196.9082"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="79" x="78" y="190.166">Environment</text><polygon fill="#181818" points="322,226.2188,332,230.2188,322,234.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="59" x2="328" y1="230.2188" y2="230.2188"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="252" x="68" y="223.4766">connect(host_and_port, user, password)</text><polygon fill="#181818" points="608,259.5293,618,263.5293,608,267.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="344" x2="614" y1="263.5293" y2="263.5293"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="75" x="353" y="256.7871">connect(url)</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="620" y="238.2188"/><ellipse cx="638" cy="256.2188" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M640.4731,262.3618 Q639.8921,262.6606 639.2529,262.8101 Q638.6138,262.9595 637.9082,262.9595 Q635.4014,262.9595 634.0815,261.3076 Q632.7617,259.6558 632.7617,256.5347 Q632.7617,253.4053 634.0815,251.7534 Q635.4014,250.1016 637.9082,250.1016 Q638.6138,250.1016 639.2612,250.251 Q639.9087,250.4004 640.4731,250.6992 L640.4731,253.4219 Q639.8423,252.8408 639.2488,252.571 Q638.6553,252.3013 638.0244,252.3013 Q636.6797,252.3013 635.9949,253.3679 Q635.3101,254.4346 635.3101,256.5347 Q635.3101,258.6265 635.9949,259.6931 Q636.6797,260.7598 638.0244,260.7598 Q638.6553,260.7598 639.2488,260.49 Q639.8423,260.2202 640.4731,259.6392 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="118" x="657" y="260.7539">ExasolWebsocket</text><polygon fill="#181818" points="847,306.5293,857,310.5293,847,314.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="707" x2="853" y1="310.5293" y2="310.5293"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="52" x="716" y="303.7871">Connect</text><polygon fill="#181818" points="718,320.5293,708,324.5293,718,328.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="712" x2="853" y1="324.5293" y2="324.5293"/><polygon fill="#181818" points="355,334.5293,345,338.5293,355,342.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="349" x2="701" y1="338.5293" y2="338.5293"/><path d="M262.5,353.5293 L566.5,353.5293 L566.5,364.8398 L556.5,374.8398 L262.5,374.8398 L262.5,353.5293 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="519.6582" style="stroke:#000000;stroke-width:1.5;" width="753.5" x="262.5" y="353.5293"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="255" x="279.5" y="369.0977">Login command and send credentials</text><polygon fill="#181818" points="685,396.1504,695,400.1504,685,404.1504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="344" x2="691" y1="400.1504" y2="400.1504"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="146" x="353" y="393.4082">send_login_command()</text><polygon fill="#181818" points="847,429.4609,857,433.4609,847,437.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="707" x2="853" y1="433.4609" y2="433.4609"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="101" x="716" y="426.7188">Login command</text><line style="stroke:#181818;stroke-width:1.0;" x1="869" x2="911" y1="466.7715" y2="466.7715"/><line style="stroke:#181818;stroke-width:1.0;" x1="911" x2="911" y1="466.7715" y2="479.7715"/><line style="stroke:#181818;stroke-width:1.0;" x1="870" x2="911" y1="479.7715" y2="479.7715"/><polygon fill="#181818" points="880,475.7715,870,479.7715,880,483.7715" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="124" x="878" y="460.0293">Generate public key</text><polygon fill="#181818" points="718,524.3926,708,528.3926,718,532.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="712" x2="853" y1="528.3926" y2="528.3926"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="96" x="726" y="506.3398">Login response</text><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="96" x="726" y="521.6504">incl. public key</text><polygon fill="#181818" points="355,557.7031,345,561.7031,355,565.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="349" x2="701" y1="561.7031" y2="561.7031"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="64" x="363" y="554.9609">Public key</text><line style="stroke:#181818;stroke-width:1.0;" x1="344" x2="386" y1="610.3242" y2="610.3242"/><line style="stroke:#181818;stroke-width:1.0;" x1="386" x2="386" y1="610.3242" y2="623.3242"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="386" y1="623.3242" y2="623.3242"/><polygon fill="#181818" points="355,619.3242,345,623.3242,355,627.3242" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="111" x="353" y="588.2715">Encrypt password</text><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="96" x="353" y="603.582">with public key</text><polygon fill="#181818" points="685,667.9453,695,671.9453,685,675.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="344" x2="691" y1="671.9453" y2="671.9453"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="214" x="353" y="649.8926">send_login_credentials(username,</text><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="133" x="353" y="665.2031">encrypted_password)</text><polygon fill="#181818" points="847,701.2559,857,705.2559,847,709.2559" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="707" x2="853" y1="705.2559" y2="705.2559"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="71" x="716" y="698.5137">Credentials</text><line style="stroke:#181818;stroke-width:1.0;" x1="869" x2="911" y1="738.5664" y2="738.5664"/><line style="stroke:#181818;stroke-width:1.0;" x1="911" x2="911" y1="738.5664" y2="751.5664"/><line style="stroke:#181818;stroke-width:1.0;" x1="870" x2="911" y1="751.5664" y2="751.5664"/><polygon fill="#181818" points="880,747.5664,870,751.5664,880,755.5664" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="123" x="878" y="731.8242">Validate credentials</text><polygon fill="#181818" points="718,780.877,708,784.877,718,788.877" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="712" x2="853" y1="784.877" y2="784.877"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="66" x="726" y="778.1348">Session ID</text><polygon fill="#181818" points="355,814.1875,345,818.1875,355,822.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="349" x2="701" y1="818.1875" y2="818.1875"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="66" x="363" y="811.4453">Session ID</text><polygon fill="#181818" points="473,847.498,483,851.498,473,855.498" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="344" x2="479" y1="851.498" y2="851.498"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="113" x="353" y="844.7559">create(session_id)</text><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="485" y="826.1875"/><ellipse cx="503" cy="844.1875" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M505.4731,850.3306 Q504.8921,850.6294 504.2529,850.7788 Q503.6138,850.9282 502.9082,850.9282 Q500.4014,850.9282 499.0815,849.2764 Q497.7617,847.6245 497.7617,844.5034 Q497.7617,841.374 499.0815,839.7222 Q500.4014,838.0703 502.9082,838.0703 Q503.6138,838.0703 504.2612,838.2197 Q504.9087,838.3691 505.4731,838.668 L505.4731,841.3906 Q504.8423,840.8096 504.2488,840.5398 Q503.6553,840.27 503.0244,840.27 Q501.6797,840.27 500.9949,841.3367 Q500.3101,842.4033 500.3101,844.5034 Q500.3101,846.5952 500.9949,847.6619 Q501.6797,848.7285 503.0244,848.7285 Q503.6553,848.7285 504.2488,848.4587 Q504.8423,848.189 505.4731,847.6079 Z " fill="#000000"/><text fill="#000000" font-family="Calibri" font-size="14" lengthAdjust="spacing" textLength="79" x="522" y="848.7227">Connection</text><polygon fill="#181818" points="70,901.498,60,905.498,70,909.498" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="338" y1="905.498" y2="905.498"/><text fill="#000000" font-family="Calibri" font-size="13" lengthAdjust="spacing" textLength="70" x="78" y="898.7559">connection</text><rect height="47.4434" style="stroke:#000000;stroke-width:1.5;fill:none;" width="611" x="2" y="913.498"/><path d="M2,913.498 L70,913.498 L70,924.498 L60,934.498 L2,934.498 L2,913.498 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Calibri" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="17" y="930.0664">ref</text><text fill="#000000" font-family="Calibri" font-size="12" lengthAdjust="spacing" textLength="295" x="160" y="952.0996">Use connection, e.g. connection:execute(statement)</text><!--MD5=[fa46ed37189d8d8b0c97111c3d79b6db]
@startuml seq_environment_connect
!include ../clean.skin

participant "Client Code" as client <<external>>
box "Exasol Driver for Lua"
participant "luasqlexasol\ndriver"  as entry
participant Environment as env << (C,#ADD1B2) >>
participant Connection as conn << (C,#ADD1B2) >>
participant ExasolWebsocket as ws << (C,#ADD1B2) >>
end box
participant "Exasol Database" as db

activate client
activate db
client -> entry: exasol()
activate entry
create env
entry -> env: create()
client <- - entry: Environment
deactivate entry
client -> env: connect(host_and_port, user, password)
activate env
' [dsn -> req~connect-with-username-password~1 >> impl,utest,itest]
create ws
env -> ws: connect(url)
activate ws
ws -> db: Connect
activate db
db - -> ws
deactivate db
ws - -> env
deactivate ws
group Login command and send credentials
    env -> ws: send_login_command()
    activate ws
    ws -> db: Login command
    activate db
    db -> db : Generate public key
    db - -> ws: Login response\nincl. public key
    deactivate db
    ws - -> env: Public key
    deactivate ws
    env -> env: Encrypt password\nwith public key
    env -> ws: send_login_credentials(username,\nencrypted_password)
    activate ws
    ws -> db: Credentials
    activate db
    db -> db: Validate credentials
    db - -> ws: Session ID
    deactivate db
    ws - -> env: Session ID
    deactivate ws
    create conn
    env -> conn: create(session_id)
end
client <- - env: connection
deactivate env
ref over client, conn: Use connection, e.g. connection:execute(statement)
@enduml

@startuml seq_environment_connect
hide empty methods
hide empty attributes
skinparam style strictuml
skinparam classAttributeIconSize 0
!pragma horizontalLineBetweenDifferentPackageAllowed

skinparam defaultFontName Calibri

skinparam padding 2

participant "Client Code" as client <<external>>
box "Exasol Driver for Lua"
participant "luasqlexasol\ndriver"  as entry
participant Environment as env << (C,#ADD1B2) >>
participant Connection as conn << (C,#ADD1B2) >>
participant ExasolWebsocket as ws << (C,#ADD1B2) >>
end box
participant "Exasol Database" as db

activate client
activate db
client -> entry: exasol()
activate entry
create env
entry -> env: create()
client <- - entry: Environment
deactivate entry
client -> env: connect(host_and_port, user, password)
activate env
create ws
env -> ws: connect(url)
activate ws
ws -> db: Connect
activate db
db - -> ws
deactivate db
ws - -> env
deactivate ws
group Login command and send credentials
    env -> ws: send_login_command()
    activate ws
    ws -> db: Login command
    activate db
    db -> db : Generate public key
    db - -> ws: Login response\nincl. public key
    deactivate db
    ws - -> env: Public key
    deactivate ws
    env -> env: Encrypt password\nwith public key
    env -> ws: send_login_credentials(username,\nencrypted_password)
    activate ws
    ws -> db: Credentials
    activate db
    db -> db: Validate credentials
    db - -> ws: Session ID
    deactivate db
    ws - -> env: Session ID
    deactivate ws
    create conn
    env -> conn: create(session_id)
end
client <- - env: connection
deactivate env
ref over client, conn: Use connection, e.g. connection:execute(statement)
@enduml

PlantUML version 1.2022.2(Sat Mar 05 17:30:19 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>